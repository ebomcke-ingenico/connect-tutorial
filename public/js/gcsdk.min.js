!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.returnExports=e()}(this,function(){function t(){}function e(t){return t=+t,t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function r(t){var e=typeof t;return null===t||"undefined"===e||"boolean"===e||"number"===e||"string"===e}function i(t){var e,i,n;if(r(t))return t;if(i=t.valueOf,"function"==typeof i&&(e=i.call(t),r(e)))return e;if(n=t.toString,"function"==typeof n&&(e=n.call(t),r(e)))return e;throw new TypeError}Function.prototype.bind||(Function.prototype.bind=function(e){var r=this;if("function"!=typeof r)throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var i=h.call(arguments,1),n=function(){if(this instanceof u){var t=r.apply(this,i.concat(h.call(arguments)));return Object(t)===t?t:this}return r.apply(e,i.concat(h.call(arguments)))},o=Math.max(0,r.length-i.length),a=[],s=0;o>s;s++)a.push("$"+s);var u=Function("binder","return function("+a.join(",")+"){return binder.apply(this,arguments)}")(n);return r.prototype&&(t.prototype=r.prototype,u.prototype=new t,t.prototype=null),u});var n,o,a,s,u,l=Function.prototype.call,c=Array.prototype,f=Object.prototype,h=c.slice,p=l.bind(f.toString),d=l.bind(f.hasOwnProperty);if((u=d(f,"__defineGetter__"))&&(n=l.bind(f.__defineGetter__),o=l.bind(f.__defineSetter__),a=l.bind(f.__lookupGetter__),s=l.bind(f.__lookupSetter__)),2!=[1,2].splice(0).length){var y=Array.prototype.splice,g=Array.prototype.push,v=Array.prototype.unshift;!function(){function t(t){for(var e=[];t--;)e.unshift(t);return e}var e,r=[];return r.splice.bind(r,0,0).apply(null,t(20)),r.splice.bind(r,0,0).apply(null,t(26)),e=r.length,r.splice(5,0,"XXX"),e+1==r.length?!0:void 0}()?Array.prototype.splice=function(t,e){var r,i=h.call(arguments,2),n=i.length;if(!arguments.length)return[];if(void 0===t&&(t=0),void 0===e&&(e=this.length-t),n>0){if(0>=e){if(t==this.length)return g.apply(this,i),[];if(0==t)return v.apply(this,i),[]}return r=h.call(this,t,t+e),i.push.apply(i,h.call(this,t+e,this.length)),i.unshift.apply(i,h.call(this,0,t)),i.unshift(0,this.length),y.apply(this,i),r}return y.call(this,t,e)}:Array.prototype.splice=function(t,e){return arguments.length?y.apply(this,[void 0===t?0:t,void 0===e?this.length-t:e].concat(h.call(arguments,2))):[]}}if(1!=[].unshift(0)){var v=Array.prototype.unshift;Array.prototype.unshift=function(){return v.apply(this,arguments),this.length}}Array.isArray||(Array.isArray=function(t){return"[object Array]"==p(t)});var m=Object("a"),b="a"!=m[0]||!(0 in m),B=function(t){var e=!0;return t&&t.call("foo",function(t,r,i){"object"!=typeof i&&(e=!1)}),!!t&&e};if(Array.prototype.forEach&&B(Array.prototype.forEach)||(Array.prototype.forEach=function(t){var e=L(this),r=b&&"[object String]"==p(this)?this.split(""):e,i=arguments[1],n=-1,o=r.length>>>0;if("[object Function]"!=p(t))throw new TypeError;for(;++n<o;)n in r&&t.call(i,r[n],n,e)}),Array.prototype.map&&B(Array.prototype.map)||(Array.prototype.map=function(t){var e=L(this),r=b&&"[object String]"==p(this)?this.split(""):e,i=r.length>>>0,n=Array(i),o=arguments[1];if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");for(var a=0;i>a;a++)a in r&&(n[a]=t.call(o,r[a],a,e));return n}),Array.prototype.filter&&B(Array.prototype.filter)||(Array.prototype.filter=function(t){var e,r=L(this),i=b&&"[object String]"==p(this)?this.split(""):r,n=i.length>>>0,o=[],a=arguments[1];if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");for(var s=0;n>s;s++)s in i&&(e=i[s],t.call(a,e,s,r)&&o.push(e));return o}),Array.prototype.every&&B(Array.prototype.every)||(Array.prototype.every=function(t){var e=L(this),r=b&&"[object String]"==p(this)?this.split(""):e,i=r.length>>>0,n=arguments[1];if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");for(var o=0;i>o;o++)if(o in r&&!t.call(n,r[o],o,e))return!1;return!0}),Array.prototype.some&&B(Array.prototype.some)||(Array.prototype.some=function(t){var e=L(this),r=b&&"[object String]"==p(this)?this.split(""):e,i=r.length>>>0,n=arguments[1];if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");for(var o=0;i>o;o++)if(o in r&&t.call(n,r[o],o,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=L(this),r=b&&"[object String]"==p(this)?this.split(""):e,i=r.length>>>0;if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var n,o=0;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in r){n=r[o++];break}if(++o>=i)throw new TypeError("reduce of empty array with no initial value")}for(;i>o;o++)o in r&&(n=t.call(void 0,n,r[o],o,e));return n}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=L(this),r=b&&"[object String]"==p(this)?this.split(""):e,i=r.length>>>0;if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var n,o=i-1;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in r){n=r[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>o)return n;do o in this&&(n=t.call(void 0,n,r[o],o,e));while(o--);return n}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(t){var r=b&&"[object String]"==p(this)?this.split(""):L(this),i=r.length>>>0;if(!i)return-1;var n=0;for(arguments.length>1&&(n=e(arguments[1])),n=n>=0?n:Math.max(0,i+n);i>n;n++)if(n in r&&r[n]===t)return n;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(t){var r=b&&"[object String]"==p(this)?this.split(""):L(this),i=r.length>>>0;if(!i)return-1;var n=i-1;for(arguments.length>1&&(n=Math.min(n,e(arguments[1]))),n=n>=0?n:i-Math.abs(n);n>=0;n--)if(n in r&&t===r[n])return n;return-1}),!Object.keys){var S=!0,C=function(){}.propertyIsEnumerable("prototype"),A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],I=A.length;for(var w in{toString:null})S=!1;Object.keys=function O(t){var e="[object Function]"===p(t),r=null!==t&&"object"==typeof t;if(!r&&!e)throw new TypeError("Object.keys called on a non-object");var O=[],i=C&&e;for(var n in t)i&&"prototype"===n||!d(t,n)||O.push(n);if(S)for(var o=t.constructor,a=o&&o.prototype===t,s=0;I>s;s++){var u=A[s];a&&"constructor"===u||!d(t,u)||O.push(u)}return O}}var E=-621987552e5,T="-000001";Date.prototype.toISOString&&-1!==new Date(E).toISOString().indexOf(T)||(Date.prototype.toISOString=function(){var t,e,r,i,n;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(i=this.getUTCFullYear(),n=this.getUTCMonth(),i+=Math.floor(n/12),n=(n%12+12)%12,t=[n+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],i=(0>i?"-":i>9999?"+":"")+("00000"+Math.abs(i)).slice(i>=0&&9999>=i?-4:-6),e=t.length;e--;)r=t[e],10>r&&(t[e]="0"+r);return i+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"});var k=!1;try{k=Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(E).toJSON().indexOf(T)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(_){}k||(Date.prototype.toJSON=function(t){var e,r=Object(this),n=i(r);if("number"==typeof n&&!isFinite(n))return null;if(e=r.toISOString,"function"!=typeof e)throw new TypeError("toISOString property is not callable");return e.call(r)}),!Date.parse,Date=function(t){function e(r,i,n,o,a,s,u){var l=arguments.length;if(this instanceof t){var c=1==l&&String(r)===r?new t(e.parse(r)):l>=7?new t(r,i,n,o,a,s,u):l>=6?new t(r,i,n,o,a,s):l>=5?new t(r,i,n,o,a):l>=4?new t(r,i,n,o):l>=3?new t(r,i,n):l>=2?new t(r,i):l>=1?new t(r):new t;return c.constructor=e,c}return t.apply(this,arguments)}function r(t,e){var r=e>1?1:0;return o[e]+Math.floor((t-1969+r)/4)-Math.floor((t-1901+r)/100)+Math.floor((t-1601+r)/400)+365*(t-1970)}function i(e){return Number(new t(1970,0,1,0,0,0,e))}var n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),o=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var a in t)e[a]=t[a];return e.now=t.now,e.UTC=t.UTC,e.prototype=t.prototype,e.prototype.constructor=e,e.parse=function(e){var o=n.exec(e);if(o){var a,s=Number(o[1]),u=Number(o[2]||1)-1,l=Number(o[3]||1)-1,c=Number(o[4]||0),f=Number(o[5]||0),h=Number(o[6]||0),p=Math.floor(1e3*Number(o[7]||0)),d=Boolean(o[4]&&!o[8]),y="-"===o[9]?1:-1,g=Number(o[10]||0),v=Number(o[11]||0);return(f>0||h>0||p>0?24:25)>c&&60>f&&60>h&&1e3>p&&u>-1&&12>u&&24>g&&60>v&&l>-1&&l<r(s,u+1)-r(s,u)&&(a=60*(24*(r(s,u)+l)+c+g*y),a=1e3*(60*(a+f+v*y)+h)+p,d&&(a=i(a)),a>=-864e13&&864e13>=a)?a:NaN}return t.parse.apply(this,arguments)},e}(Date),Date.now||(Date.now=function(){return(new Date).getTime()}),Number.prototype.toFixed&&"0.000"===8e-5.toFixed(3)&&"0"!==.9.toFixed(0)&&"1.25"===1.255.toFixed(2)&&"1000000000000000128"===0xde0b6b3a7640080.toFixed(0)||!function(){function t(t,e){for(var r=-1;++r<a;)e+=t*s[r],s[r]=e%o,e=Math.floor(e/o)}function e(t){for(var e=a,r=0;--e>=0;)r+=s[e],s[e]=Math.floor(r/t),r=r%t*o}function r(){for(var t=a,e="";--t>=0;)if(""!==e||0===t||0!==s[t]){var r=String(s[t]);""===e?e=r:e+="0000000".slice(0,7-r.length)+r}return e}function i(t,e,r){return 0===e?r:e%2===1?i(t,e-1,r*t):i(t*t,e/2,r)}function n(t){for(var e=0;t>=4096;)e+=12,t/=4096;for(;t>=2;)e+=1,t/=2;return e}var o,a,s;o=1e7,a=6,s=[0,0,0,0,0,0],Number.prototype.toFixed=function(o){var a,s,u,l,c,f,h,p;if(a=Number(o),a=a!==a?0:Math.floor(a),0>a||a>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(s=Number(this),s!==s)return"NaN";if(-1e21>=s||s>=1e21)return String(s);if(u="",0>s&&(u="-",s=-s),l="0",s>1e-21)if(c=n(s*i(2,69,1))-69,f=0>c?s*i(2,-c,1):s/i(2,c,1),f*=4503599627370496,c=52-c,c>0){for(t(0,f),h=a;h>=7;)t(1e7,0),h-=7;for(t(i(10,h,1),0),h=c-1;h>=23;)e(1<<23),h-=23;e(1<<h),t(1,1),e(2),l=r()}else t(0,f),t(1<<-c,0),l=r()+"0.00000000000000000000".slice(2,2+a);return a>0?(p=l.length,l=a>=p?u+"0.0000000000000000000".slice(0,a-p+2)+l:u+l.slice(0,p-a)+"."+l.slice(p-a)):l=u+l,l}}();var R=String.prototype.split;if(2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var t=void 0===/()??/.exec("")[1];String.prototype.split=function(e,r){var i=this;if(void 0===e&&0===r)return[];if("[object RegExp]"!==Object.prototype.toString.call(e))return R.apply(this,arguments);var n,o,a,s,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),c=0,e=new RegExp(e.source,l+"g");for(i+="",t||(n=new RegExp("^"+e.source+"$(?!\\s)",l)),r=void 0===r?-1>>>0:r>>>0;(o=e.exec(i))&&(a=o.index+o[0].length,!(a>c&&(u.push(i.slice(c,o.index)),!t&&o.length>1&&o[0].replace(n,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(o[t]=void 0)}),o.length>1&&o.index<i.length&&Array.prototype.push.apply(u,o.slice(1)),s=o[0].length,c=a,u.length>=r)));)e.lastIndex===o.index&&e.lastIndex++;return c===i.length?!s&&e.test("")||u.push(""):u.push(i.slice(c)),u.length>r?u.slice(0,r):u}}():"0".split(void 0,0).length&&(String.prototype.split=function(t,e){return void 0===t&&0===e?[]:R.apply(this,arguments)}),"".substr&&"b"!=="0b".substr(-1)){var N=String.prototype.substr;String.prototype.substr=function(t,e){return N.call(this,0>t&&(t=this.length+t)<0?0:t,e)}}var D="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff";if(!String.prototype.trim||D.trim()){D="["+D+"]";var P=new RegExp("^"+D+D+"*"),x=new RegExp(D+D+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(P,"").replace(x,"")}}8===parseInt(D+"08")&&22===parseInt(D+"0x16")||(parseInt=function(t){var e=/^0[xX]/;return function(r,i){return r=String(r).trim(),+i||(i=e.test(r)?16:10),t(r,i)}}(parseInt));var L=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)}}),function(){function t(t){function e(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(i.isArrayBuffer(t)||i.isArrayBufferView(t)){var r=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,r)}catch(n){for(var o=0;o<r.length;++o)this.putByte(r[o])}}else(t instanceof e||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}function r(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=i.isArrayBuffer(t),n=i.isArrayBufferView(t);return r||n?(r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength)):(this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==t&&void 0!==t&&this.putBytes(t),void("writeOffset"in e&&(this.write=e.writeOffset)))}var i=t.util=t.util||{};!function(){function t(t){if(t.source===window&&t.data===e){t.stopPropagation();var i=r.slice();r.length=0,i.forEach(function(t){t()})}}if("undefined"!=typeof process&&process.nextTick)return i.nextTick=process.nextTick,void("function"==typeof setImmediate?i.setImmediate=setImmediate:i.setImmediate=i.nextTick);if("function"==typeof setImmediate)return i.setImmediate=setImmediate,void(i.nextTick=function(t){return setImmediate(t)});if(i.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",r=[];i.setImmediate=function(t){r.push(t),1===r.length&&window.postMessage(e,"*")},window.addEventListener("message",t,!0)}if("undefined"!=typeof MutationObserver){var n=Date.now(),o=!0,a=document.createElement("div"),r=[];new MutationObserver(function(){var t=r.slice();r.length=0,t.forEach(function(t){t()})}).observe(a,{attributes:!0});var s=i.setImmediate;i.setImmediate=function(t){Date.now()-n>15?(n=Date.now(),s(t)):(r.push(t),1===r.length&&a.setAttribute("a",o=!o))}}i.nextTick=i.setImmediate}(),i.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},i.isArrayBufferView=function(t){return t&&i.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},i.ByteBuffer=e,i.ByteStringBuffer=e;var n=4096;i.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>n&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},i.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},i.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},i.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(i.encodeUtf8(t))},i.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},i.ByteStringBuffer.prototype.putInt=function(t,e){var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)},i.ByteStringBuffer.prototype.putSignedInt=function(t,e){return 0>t&&(t+=2<<e-1),this.putInt(t,e)},i.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},i.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},i.ByteStringBuffer.prototype.getInt=function(t){var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e},i.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},i.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.ByteStringBuffer.prototype.bytes=function(t){return"undefined"==typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},i.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var t=i.createBuffer(this.data);return t.read=this.read,t},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);16>r&&(t+="0"),t+=r.toString(16)}return t},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=r,i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this},i.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},i.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;e>r;++r)this.data.setUint8(t);return this},i.DataBuffer.prototype.putBytes=function(t,e){if(i.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var o=new Uint8Array(this.data.buffer,this.write);return o.set(r),this.write+=n,this}if(i.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var o=new Uint8Array(this.data.buffer);return o.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof i.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&i.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var o=new Uint8Array(t.data.byteLength,this.write);return o.set(r),this.write+=r.byteLength,this}if(t instanceof i.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var a;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(t,a,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(t,a,this.write),this;if("utf8"===e&&(t=i.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(a),this;if("utf16"===e)return this.accommodate(2*t.length),a=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},i.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},i.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},i.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(t,e){this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this},i.DataBuffer.prototype.putSignedInt=function(t,e){return this.accommodate(e/8),0>t&&(t+=2<<e-1),this.putInt(t,e)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},i.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},i.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},i.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},i.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},i.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},i.DataBuffer.prototype.getInt=function(t){var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e},i.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},i.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.DataBuffer.prototype.bytes=function(t){return"undefined"==typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},i.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);16>r&&(t+="0"),t+=r.toString(16)}return t},i.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8","binary"===t||"raw"===t)return i.binary.raw.encode(e);if("hex"===t)return i.binary.hex.encode(e);if("base64"===t)return i.binary.base64.encode(e);if("utf8"===t)return i.text.utf8.decode(e);if("utf16"===t)return i.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},i.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=i.encodeUtf8(t)),new i.ByteBuffer(t)},i.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),e>>>=1,e>0&&(t+=t);return r},i.xorBytes=function(t,e,r){for(var i="",n="",o="",a=0,s=0;r>0;--r,++a)n=t.charCodeAt(a)^e.charCodeAt(a),s>=10&&(i+=o,o="",s=0),o+=String.fromCharCode(n),++s;return i+=o},i.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},i.bytesToHex=function(t){return i.createBuffer(t).toHex()},i.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];i.encode64=function(t,e){for(var r,i,n,a="",s="",u=0;u<t.length;)r=t.charCodeAt(u++),i=t.charCodeAt(u++),n=t.charCodeAt(u++),a+=o.charAt(r>>2),a+=o.charAt((3&r)<<4|i>>4),isNaN(i)?a+="==":(a+=o.charAt((15&i)<<2|n>>6),a+=isNaN(n)?"=":o.charAt(63&n)),e&&a.length>e&&(s+=a.substr(0,e)+"\r\n",a=a.substr(e));return s+=a},i.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,i,n,o="",s=0;s<t.length;)e=a[t.charCodeAt(s++)-43],r=a[t.charCodeAt(s++)-43],i=a[t.charCodeAt(s++)-43],n=a[t.charCodeAt(s++)-43],o+=String.fromCharCode(e<<2|r>>4),64!==i&&(o+=String.fromCharCode((15&r)<<4|i>>2),64!==n&&(o+=String.fromCharCode((3&i)<<6|n)));return o},i.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},i.decodeUtf8=function(t){return decodeURIComponent(escape(t))},i.binary={raw:{},hex:{},base64:{}},i.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},i.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,o=0;o<t.length;++o)i[n++]=t.charCodeAt(o);return e?n-r:i},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var n=0,o=r;for(1&t.length&&(n=1,i[o++]=parseInt(t[0],16));n<t.length;n+=2)i[o++]=parseInt(t.substr(n,2),16);return e?o-r:i},i.binary.base64.encode=function(t,e){for(var r,i,n,a="",s="",u=0;u<t.byteLength;)r=t[u++],i=t[u++],n=t[u++],a+=o.charAt(r>>2),a+=o.charAt((3&r)<<4|i>>4),isNaN(i)?a+="==":(a+=o.charAt((15&i)<<2|n>>6),a+=isNaN(n)?"=":o.charAt(63&n)),e&&a.length>e&&(s+=a.substr(0,e)+"\r\n",a=a.substr(e));return s+=a},i.binary.base64.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var n,o,s,u,l=0,c=r;l<t.length;)n=a[t.charCodeAt(l++)-43],o=a[t.charCodeAt(l++)-43],s=a[t.charCodeAt(l++)-43],u=a[t.charCodeAt(l++)-43],i[c++]=n<<2|o>>4,64!==s&&(i[c++]=(15&o)<<4|s>>2,64!==u&&(i[c++]=(3&s)<<6|u));return e?c-r:i.subarray(0,c)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(t,e,r){t=i.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var o=r,a=0;a<t.length;++a)n[o++]=t.charCodeAt(a);return e?o-r:n},i.text.utf8.decode=function(t){return i.decodeUtf8(String.fromCharCode.apply(null,t))},i.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length));var n=new Uint16Array(i);r=r||0;for(var o=r,a=r,s=0;s<t.length;++s)n[a++]=t.charCodeAt(s),o+=2;return e?o-r:i},i.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t))},i.deflate=function(t,e,r){if(e=i.decode64(t.deflate(i.encode64(e)).rval),r){var n=2,o=e.charCodeAt(1);32&o&&(n=6),e=e.substring(n,e.length-4)}return e},i.inflate=function(t,e,r){var n=t.inflate(i.encode64(e)).rval;return null===n?null:i.decode64(n)};var s=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(null===r?n=t.removeItem(e):(r=i.encode64(JSON.stringify(r)),n=t.setItem(e,r)),"undefined"!=typeof n&&n.rval!==!0){var o=new Error(n.error.message);throw o.id=n.error.id,o.name=n.error.name,o}},u=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(i.decode64(r))),r},l=function(t,e,r,i){var n=u(t,e);null===n&&(n={}),n[r]=i,s(t,e,n)},c=function(t,e,r){var i=u(t,e);return null!==i&&(i=r in i?i[r]:null),i},f=function(t,e,r){var i=u(t,e);if(null!==i&&r in i){delete i[r];var n=!0;for(var o in i){n=!1;break}n&&(i=null),s(t,e,i)}},h=function(t,e){s(t,e,null)},p=function(t,e,r){var i=null;"undefined"==typeof r&&(r=["web","flash"]);var n,o=!1,a=null;for(var s in r){n=r[s];try{if("flash"===n||"both"===n){if(null===e[0])throw new Error("Flash local storage not available.");i=t.apply(this,e),o="flash"===n}"web"!==n&&"both"!==n||(e[0]=localStorage,i=t.apply(this,e),o=!0)}catch(u){a=u}if(o)break}if(!o)throw a;return i};i.setItem=function(t,e,r,i,n){p(l,arguments,n)},i.getItem=function(t,e,r,i){return p(c,arguments,i)},i.removeItem=function(t,e,r,i){p(f,arguments,i)},i.clearItems=function(t,e,r){p(h,arguments,r)},i.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),i=null===r?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return i&&(i.fullHost=i.host,i.port?80!==i.port&&"http"===i.scheme?i.fullHost+=":"+i.port:443!==i.port&&"https"===i.scheme&&(i.fullHost+=":"+i.port):"http"===i.scheme?i.port=80:"https"===i.scheme&&(i.port=443),i.full=i.scheme+"://"+i.fullHost),i};var d=null;i.getQueryVariables=function(t){var e,r=function(t){for(var e={},r=t.split("&"),i=0;i<r.length;i++){var n,o,a=r[i].indexOf("=");a>0?(n=r[i].substring(0,a),o=r[i].substring(a+1)):(n=r[i],o=null),n in e||(e[n]=[]),n in Object.prototype||null===o||e[n].push(unescape(o))}return e};return"undefined"==typeof t?(null===d&&(d="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),e=d):e=r(t),e},i.parseFragment=function(t){
var e=t,r="",n=t.indexOf("?");n>0&&(e=t.substring(0,n),r=t.substring(n+1));var o=e.split("/");o.length>0&&""===o[0]&&o.shift();var a=""===r?{}:i.getQueryVariables(r);return{pathString:e,queryString:r,path:o,query:a}},i.makeRequest=function(t){var e=i.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(t){return"undefined"==typeof t?e.path:e.path[t]},getQuery:function(t,r){var i;return"undefined"==typeof t?i=e.query:(i=e.query[t],i&&"undefined"!=typeof r&&(i=i[r])),i},getQueryLast:function(t,e){var i,n=r.getQuery(t);return i=n?n[n.length-1]:e}};return r},i.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var i=jQuery.param(e||{});return r=r||"",t+(i.length>0?"?"+i:"")+(r.length>0?"#"+r:"")},i.setPath=function(t,e,r){if("object"==typeof t&&null!==t)for(var i=0,n=e.length;n>i;){var o=e[i++];if(i==n)t[o]=r;else{var a=o in t;(!a||a&&"object"!=typeof t[o]||a&&null===t[o])&&(t[o]={}),t=t[o]}}},i.getPath=function(t,e,r){for(var i=0,n=e.length,o=!0;o&&n>i&&"object"==typeof t&&null!==t;){var a=e[i++];o=a in t,o&&(t=t[a])}return o?t:r},i.deletePath=function(t,e){if("object"==typeof t&&null!==t)for(var r=0,i=e.length;i>r;){var n=e[r++];if(r==i)delete t[n];else{if(!(n in t)||"object"!=typeof t[n]||null===t[n])break;t=t[n]}}},i.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},i.format=function(t){for(var e,r,i=/%./g,n=0,o=[],a=0;e=i.exec(t);){r=t.substring(a,i.lastIndex-2),r.length>0&&o.push(r),a=i.lastIndex;var s=e[0][1];switch(s){case"s":case"o":n<arguments.length?o.push(arguments[n++ +1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+s+"?>")}}return o.push(t.substring(a)),o.join("")},i.formatNumber=function(t,e,r,i){var n=t,o=isNaN(e=Math.abs(e))?2:e,a=void 0===r?",":r,s=void 0===i?".":i,u=0>n?"-":"",l=parseInt(n=Math.abs(+n||0).toFixed(o),10)+"",c=l.length>3?l.length%3:0;return u+(c?l.substr(0,c)+s:"")+l.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+s)+(o?a+Math.abs(n-l).toFixed(o).slice(2):"")},i.formatSize=function(t){return t=t>=1073741824?i.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?i.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?i.formatNumber(t/1024,0)+" KiB":i.formatNumber(t,0)+" bytes"},i.bytesFromIP=function(t){return-1!==t.indexOf(".")?i.bytesFromIPv4(t):-1!==t.indexOf(":")?i.bytesFromIPv6(t):null},i.bytesFromIPv4=function(t){if(t=t.split("."),4!==t.length)return null;for(var e=i.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()},i.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(t){return 0===t.length&&++e,!0});for(var r=2*(8-t.length+e),n=i.createBuffer(),o=0;8>o;++o)if(t[o]&&0!==t[o].length){var a=i.hexToBytes(t[o]);a.length<2&&n.putByte(0),n.putBytes(a)}else n.fillWithByte(0,r),r=0;return n.getBytes()},i.bytesToIP=function(t){return 4===t.length?i.bytesToIPv4(t):16===t.length?i.bytesToIPv6(t):null},i.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},i.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],n=0,o=0;o<t.length;o+=2){for(var a=i.bytesToHex(t[o]+t[o+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var s=r[r.length-1],u=e.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}e.push(a)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),0===l.start&&e.unshift(""),7===l.end&&e.push(""))}return e.join(":")},i.estimateCores=function(t,e){function r(t,s,u){if(0===s){var l=Math.floor(t.reduce(function(t,e){return t+e},0)/t.length);return i.cores=Math.max(1,l),URL.revokeObjectURL(a),e(null,i.cores)}n(u,function(e,i){t.push(o(u,i)),r(t,s-1,u)})}function n(t,e){for(var r=[],i=[],n=0;t>n;++n){var o=new Worker(a);o.addEventListener("message",function(n){if(i.push(n.data),i.length===t){for(var o=0;t>o;++o)r[o].terminate();e(null,i)}}),r.push(o)}for(var n=0;t>n;++n)r[n].postMessage(n)}function o(t,e){for(var r=[],i=0;t>i;++i)for(var n=e[i],o=r[i]=[],a=0;t>a;++a)if(i!==a){var s=e[a];(n.st>s.st&&n.st<s.et||s.st>n.st&&s.st<n.et)&&o.push(a)}return r.reduce(function(t,e){return Math.max(t,e.length)},0)}if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in i&&!t.update)return e(null,i.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,e(null,i.cores);if("undefined"==typeof Worker)return i.cores=1,e(null,i.cores);if("undefined"==typeof Blob)return i.cores=2,e(null,i.cores);var a=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16)}}var e="util";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.cipher=t.cipher||{},t.cipher.algorithms=t.cipher.algorithms||{},t.cipher.createCipher=function(e,r){var i=e;if("string"==typeof i&&(i=t.cipher.getAlgorithm(i),i&&(i=i())),!i)throw new Error("Unsupported algorithm: "+e);return new t.cipher.BlockCipher({algorithm:i,key:r,decrypt:!1})},t.cipher.createDecipher=function(e,r){var i=e;if("string"==typeof i&&(i=t.cipher.getAlgorithm(i),i&&(i=i())),!i)throw new Error("Unsupported algorithm: "+e);return new t.cipher.BlockCipher({algorithm:i,key:r,decrypt:!0})},t.cipher.registerAlgorithm=function(e,r){e=e.toUpperCase(),t.cipher.algorithms[e]=r},t.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in t.cipher.algorithms?t.cipher.algorithms[e]:null};var e=t.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};e.prototype.start=function(e){e=e||{};var r={};for(var i in e)r[i]=e[i];r.decrypt=this._decrypt,this._finish=!1,this._input=t.util.createBuffer(),this.output=e.output||t.util.createBuffer(),this.mode.start(r)},e.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},e.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,this._decrypt||!this.mode.pad||this.mode.pad(this._input,e)?(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e)?!1:!this.mode.afterFinish||this.mode.afterFinish(this.output,e)):!1}}var e="cipher";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e){if("string"==typeof e&&(e=t.util.createBuffer(e)),t.util.isArray(e)&&e.length>4){var r=e;e=t.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}return t.util.isArray(e)||(e=[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]),e}function r(t){t[t.length-1]=t[t.length-1]+1&4294967295}function i(t){return[t/4294967296|0,4294967295&t]}t.cipher=t.cipher||{};var n=t.cipher.modes=t.cipher.modes||{};n.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},n.ecb.prototype.start=function(t){},n.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])},n.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])},n.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},n.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)},n.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},n.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._prev=this._iv.slice(0)}},n.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]);this._prev=this._outBlock},n.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)},n.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},n.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)},n.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},n.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},n.cfb.prototype.encrypt=function(t,e,r){var i=t.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32()^this._outBlock[n],e.putInt32(this._inBlock[n]);else{var o=(this.blockSize-i)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32()^this._outBlock[n],this._partialOutput.putInt32(this._partialBlock[n]);if(o>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}},n.cfb.prototype.decrypt=function(t,e,r){var i=t.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32(),e.putInt32(this._inBlock[n]^this._outBlock[n]);else{var o=(this.blockSize-i)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[n]^this._outBlock[n]);if(o>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}},n.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},n.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},n.ofb.prototype.encrypt=function(t,e,r){var i=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]),this._inBlock[n]=this._outBlock[n];else{var o=(this.blockSize-i)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(o>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._outBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}},n.ofb.prototype.decrypt=n.ofb.prototype.encrypt,n.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},n.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},n.ctr.prototype.encrypt=function(t,e,i){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(a>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!i)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}r(this._inBlock)},n.ctr.prototype.decrypt=n.ctr.prototype.encrypt,n.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0,this._R=3774873600},n.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var n=t.util.createBuffer(e.iv);this._cipherLength=0;var o;if(o="additionalData"in e?t.util.createBuffer(e.additionalData):t.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=t.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=n.length();if(12===a)this._j0=[n.getInt32(),n.getInt32(),n.getInt32(),1];else{for(this._j0=[0,0,0,0];n.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(i(8*a)))}this._inBlock=this._j0.slice(0),r(this._inBlock),this._partialBytes=0,o=t.util.createBuffer(o),this._aDataLength=i(8*o.length());var s=o.length()%this.blockSize;for(s&&o.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];o.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[o.getInt32(),o.getInt32(),o.getInt32(),o.getInt32()])},n.gcm.prototype.encrypt=function(t,e,i){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^=t.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(0===a||i){if(i){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!i)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),r(this._inBlock)},n.gcm.prototype.decrypt=function(t,e,i){var n=t.length();if(n<this.blockSize&&!(i&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),r(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^this._hashBlock[o]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},n.gcm.prototype.afterFinish=function(e,r){var n=!0;r.decrypt&&r.overflow&&e.truncate(this.blockSize-r.overflow),this.tag=t.util.createBuffer();var o=this._aDataLength.concat(i(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,o);var a=[];this.cipher.encrypt(this._j0,a);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^a[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),r.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n},n.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],i=e.slice(0),n=0;128>n;++n){var o=t[n/32|0]&1<<31-n%32;o&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),this.pow(i,i)}return r},n.gcm.prototype.pow=function(t,e){for(var r=1&t[3],i=3;i>0;--i)e[i]=t[i]>>>1|(1&t[i-1])<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)},n.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;32>r;++r){var i=r/8|0,n=t[i]>>>4*(7-r%8)&15,o=this._m[r][n];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e},n.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)},n.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,i=4*r,n=16*r,o=new Array(n),a=0;n>a;++a){var s=[0,0,0,0],u=a/i|0,l=(i-1-a%i)*e;s[u]=1<<e-1<<l,o[a]=this.generateSubHashTable(this.multiply(s,t),e)}return o},n.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,i=r>>>1,n=new Array(r);n[i]=t.slice(0);for(var o=i>>>1;o>0;)this.pow(n[2*o],n[o]=[]),o>>=1;for(o=2;i>o;){for(var a=1;o>a;++a){var s=n[o],u=n[a];n[o+a]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}o*=2}for(n[0]=[0,0,0,0],o=i+1;r>o;++o){var l=n[o^i];n[o]=[t[0]^l[0],t[1]^l[1],t[2]^l[2],t[3]^l[3]]}return n}}var e="cipherModes";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e,r){var i=function(){return new t.aes.Algorithm(e,r)};t.cipher.registerAlgorithm(e,i)}function r(){f=!0,u=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;128>e;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;a=new Array(256),s=new Array(256),l=new Array(4),c=new Array(4);for(var e=0;4>e;++e)l[e]=new Array(256),c[e]=new Array(256);for(var r,i,n,o,h,p,d,y=0,g=0,e=0;256>e;++e){o=g^g<<1^g<<2^g<<3^g<<4,o=o>>8^255&o^99,a[y]=o,s[o]=y,h=t[o],r=t[y],i=t[r],n=t[i],p=h<<24^o<<16^o<<8^(o^h),d=(r^i^n)<<24^(y^n)<<16^(y^i^n)<<8^(y^r^n);for(var v=0;4>v;++v)l[v][y]=p,c[v][o]=d,p=p<<24|p>>>8,d=d<<24|d>>>8;0===y?y=g=1:(y=r^t[t[t[r^n]]],g^=t[t[g]])}}function i(t,e){for(var r,i=t.slice(0),n=1,o=i.length,s=o+6+1,l=h*s,f=o;l>f;++f)r=i[f-1],f%o===0?(r=a[r>>>16&255]<<24^a[r>>>8&255]<<16^a[255&r]<<8^a[r>>>24]^u[n]<<24,n++):o>6&&f%o===4&&(r=a[r>>>24]<<24^a[r>>>16&255]<<16^a[r>>>8&255]<<8^a[255&r]),i[f]=i[f-o]^r;if(e){var p,d=c[0],y=c[1],g=c[2],v=c[3],m=i.slice(0);l=i.length;for(var f=0,b=l-h;l>f;f+=h,b-=h)if(0===f||f===l-h)m[f]=i[b],m[f+1]=i[b+3],m[f+2]=i[b+2],m[f+3]=i[b+1];else for(var B=0;h>B;++B)p=i[b+B],m[f+(3&-B)]=d[a[p>>>24]]^y[a[p>>>16&255]]^g[a[p>>>8&255]]^v[a[255&p]];i=m}return i}function n(t,e,r,i){var n,o,u,f,h,p=t.length/4-1;i?(n=c[0],o=c[1],u=c[2],f=c[3],h=s):(n=l[0],o=l[1],u=l[2],f=l[3],h=a);var d,y,g,v,m,b,B;d=e[0]^t[0],y=e[i?3:1]^t[1],g=e[2]^t[2],v=e[i?1:3]^t[3];for(var S=3,C=1;p>C;++C)m=n[d>>>24]^o[y>>>16&255]^u[g>>>8&255]^f[255&v]^t[++S],b=n[y>>>24]^o[g>>>16&255]^u[v>>>8&255]^f[255&d]^t[++S],B=n[g>>>24]^o[v>>>16&255]^u[d>>>8&255]^f[255&y]^t[++S],v=n[v>>>24]^o[d>>>16&255]^u[y>>>8&255]^f[255&g]^t[++S],d=m,y=b,g=B;r[0]=h[d>>>24]<<24^h[y>>>16&255]<<16^h[g>>>8&255]<<8^h[255&v]^t[++S],r[i?3:1]=h[y>>>24]<<24^h[g>>>16&255]<<16^h[v>>>8&255]<<8^h[255&d]^t[++S],r[2]=h[g>>>24]<<24^h[v>>>16&255]<<16^h[d>>>8&255]<<8^h[255&y]^t[++S],r[i?1:3]=h[v>>>24]<<24^h[d>>>16&255]<<16^h[y>>>8&255]<<8^h[255&g]^t[++S]}function o(e){e=e||{};var r,i=(e.mode||"CBC").toUpperCase(),n="AES-"+i;r=e.decrypt?t.cipher.createDecipher(n,e.key):t.cipher.createCipher(n,e.key);var o=r.start;return r.start=function(e,i){var n=null;i instanceof t.util.ByteBuffer&&(n=i,i={}),i=i||{},i.output=n,i.iv=e,o.call(r,i)},r}t.aes=t.aes||{},t.aes.startEncrypting=function(t,e,r,i){var n=o({key:t,output:r,decrypt:!1,mode:i});return n.start(e),n},t.aes.createEncryptionCipher=function(t,e){return o({key:t,output:null,decrypt:!1,mode:e})},t.aes.startDecrypting=function(t,e,r,i){var n=o({key:t,output:r,decrypt:!0,mode:i});return n.start(e),n},t.aes.createDecryptionCipher=function(t,e){return o({key:t,output:null,decrypt:!0,mode:e})},t.aes.Algorithm=function(t,e){f||r();var i=this;i.name=t,i.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return n(i._w,t,e,!1)},decrypt:function(t,e){return n(i._w,t,e,!0)}}}),i._init=!1},t.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var r,n=e.key;if("string"!=typeof n||16!==n.length&&24!==n.length&&32!==n.length){if(t.util.isArray(n)&&(16===n.length||24===n.length||32===n.length)){r=n,n=t.util.createBuffer();for(var o=0;o<r.length;++o)n.putByte(r[o])}}else n=t.util.createBuffer(n);if(!t.util.isArray(n)){r=n,n=[];var a=r.length();if(16===a||24===a||32===a){a>>>=2;for(var o=0;a>o;++o)n.push(r.getInt32())}}if(!t.util.isArray(n)||4!==n.length&&6!==n.length&&8!==n.length)throw new Error("Invalid key parameter.");var s=this.mode.name,u=-1!==["CFB","OFB","CTR","GCM"].indexOf(s);this._w=i(n,e.decrypt&&!u),this._init=!0}},t.aes._expandKey=function(t,e){return f||r(),i(t,e)},t.aes._updateBlock=n,e("AES-ECB",t.cipher.modes.ecb),e("AES-CBC",t.cipher.modes.cbc),e("AES-CFB",t.cipher.modes.cfb),e("AES-OFB",t.cipher.modes.ofb),e("AES-CTR",t.cipher.modes.ctr),e("AES-GCM",t.cipher.modes.gcm);var a,s,u,l,c,f=!1,h=4}var e="aes";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./cipher","./cipherModes","./util"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.pki=t.pki||{};var e=t.pki.oids=t.oids=t.oids||{};e["1.2.840.113549.1.1.1"]="rsaEncryption",e.rsaEncryption="1.2.840.113549.1.1.1",e["1.2.840.113549.1.1.4"]="md5WithRSAEncryption",e.md5WithRSAEncryption="1.2.840.113549.1.1.4",e["1.2.840.113549.1.1.5"]="sha1WithRSAEncryption",e.sha1WithRSAEncryption="1.2.840.113549.1.1.5",e["1.2.840.113549.1.1.7"]="RSAES-OAEP",e["RSAES-OAEP"]="1.2.840.113549.1.1.7",e["1.2.840.113549.1.1.8"]="mgf1",e.mgf1="1.2.840.113549.1.1.8",e["1.2.840.113549.1.1.9"]="pSpecified",e.pSpecified="1.2.840.113549.1.1.9",e["1.2.840.113549.1.1.10"]="RSASSA-PSS",e["RSASSA-PSS"]="1.2.840.113549.1.1.10",e["1.2.840.113549.1.1.11"]="sha256WithRSAEncryption",e.sha256WithRSAEncryption="1.2.840.113549.1.1.11",e["1.2.840.113549.1.1.12"]="sha384WithRSAEncryption",e.sha384WithRSAEncryption="1.2.840.113549.1.1.12",e["1.2.840.113549.1.1.13"]="sha512WithRSAEncryption",e.sha512WithRSAEncryption="1.2.840.113549.1.1.13",e["1.3.14.3.2.7"]="desCBC",e.desCBC="1.3.14.3.2.7",e["1.3.14.3.2.26"]="sha1",e.sha1="1.3.14.3.2.26",e["2.16.840.1.101.3.4.2.1"]="sha256",e.sha256="2.16.840.1.101.3.4.2.1",e["2.16.840.1.101.3.4.2.2"]="sha384",e.sha384="2.16.840.1.101.3.4.2.2",e["2.16.840.1.101.3.4.2.3"]="sha512",e.sha512="2.16.840.1.101.3.4.2.3",e["1.2.840.113549.2.5"]="md5",e.md5="1.2.840.113549.2.5",e["1.2.840.113549.1.7.1"]="data",e.data="1.2.840.113549.1.7.1",e["1.2.840.113549.1.7.2"]="signedData",e.signedData="1.2.840.113549.1.7.2",e["1.2.840.113549.1.7.3"]="envelopedData",e.envelopedData="1.2.840.113549.1.7.3",e["1.2.840.113549.1.7.4"]="signedAndEnvelopedData",e.signedAndEnvelopedData="1.2.840.113549.1.7.4",e["1.2.840.113549.1.7.5"]="digestedData",e.digestedData="1.2.840.113549.1.7.5",e["1.2.840.113549.1.7.6"]="encryptedData",e.encryptedData="1.2.840.113549.1.7.6",e["1.2.840.113549.1.9.1"]="emailAddress",e.emailAddress="1.2.840.113549.1.9.1",e["1.2.840.113549.1.9.2"]="unstructuredName",e.unstructuredName="1.2.840.113549.1.9.2",e["1.2.840.113549.1.9.3"]="contentType",e.contentType="1.2.840.113549.1.9.3",e["1.2.840.113549.1.9.4"]="messageDigest",e.messageDigest="1.2.840.113549.1.9.4",e["1.2.840.113549.1.9.5"]="signingTime",e.signingTime="1.2.840.113549.1.9.5",e["1.2.840.113549.1.9.6"]="counterSignature",e.counterSignature="1.2.840.113549.1.9.6",e["1.2.840.113549.1.9.7"]="challengePassword",e.challengePassword="1.2.840.113549.1.9.7",e["1.2.840.113549.1.9.8"]="unstructuredAddress",e.unstructuredAddress="1.2.840.113549.1.9.8",e["1.2.840.113549.1.9.14"]="extensionRequest",e.extensionRequest="1.2.840.113549.1.9.14",e["1.2.840.113549.1.9.20"]="friendlyName",e.friendlyName="1.2.840.113549.1.9.20",e["1.2.840.113549.1.9.21"]="localKeyId",e.localKeyId="1.2.840.113549.1.9.21",e["1.2.840.113549.1.9.22.1"]="x509Certificate",e.x509Certificate="1.2.840.113549.1.9.22.1",e["1.2.840.113549.1.12.10.1.1"]="keyBag",e.keyBag="1.2.840.113549.1.12.10.1.1",e["1.2.840.113549.1.12.10.1.2"]="pkcs8ShroudedKeyBag",e.pkcs8ShroudedKeyBag="1.2.840.113549.1.12.10.1.2",e["1.2.840.113549.1.12.10.1.3"]="certBag",e.certBag="1.2.840.113549.1.12.10.1.3",e["1.2.840.113549.1.12.10.1.4"]="crlBag",e.crlBag="1.2.840.113549.1.12.10.1.4",e["1.2.840.113549.1.12.10.1.5"]="secretBag",e.secretBag="1.2.840.113549.1.12.10.1.5",e["1.2.840.113549.1.12.10.1.6"]="safeContentsBag",e.safeContentsBag="1.2.840.113549.1.12.10.1.6",e["1.2.840.113549.1.5.13"]="pkcs5PBES2",e.pkcs5PBES2="1.2.840.113549.1.5.13",e["1.2.840.113549.1.5.12"]="pkcs5PBKDF2",e.pkcs5PBKDF2="1.2.840.113549.1.5.12",e["1.2.840.113549.1.12.1.1"]="pbeWithSHAAnd128BitRC4",e.pbeWithSHAAnd128BitRC4="1.2.840.113549.1.12.1.1",e["1.2.840.113549.1.12.1.2"]="pbeWithSHAAnd40BitRC4",e.pbeWithSHAAnd40BitRC4="1.2.840.113549.1.12.1.2",e["1.2.840.113549.1.12.1.3"]="pbeWithSHAAnd3-KeyTripleDES-CBC",e["pbeWithSHAAnd3-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.3",e["1.2.840.113549.1.12.1.4"]="pbeWithSHAAnd2-KeyTripleDES-CBC",e["pbeWithSHAAnd2-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.4",e["1.2.840.113549.1.12.1.5"]="pbeWithSHAAnd128BitRC2-CBC",e["pbeWithSHAAnd128BitRC2-CBC"]="1.2.840.113549.1.12.1.5",e["1.2.840.113549.1.12.1.6"]="pbewithSHAAnd40BitRC2-CBC",e["pbewithSHAAnd40BitRC2-CBC"]="1.2.840.113549.1.12.1.6",e["1.2.840.113549.3.7"]="des-EDE3-CBC",e["des-EDE3-CBC"]="1.2.840.113549.3.7",e["2.16.840.1.101.3.4.1.2"]="aes128-CBC",e["aes128-CBC"]="2.16.840.1.101.3.4.1.2",e["2.16.840.1.101.3.4.1.22"]="aes192-CBC",e["aes192-CBC"]="2.16.840.1.101.3.4.1.22",e["2.16.840.1.101.3.4.1.42"]="aes256-CBC",e["aes256-CBC"]="2.16.840.1.101.3.4.1.42",e["2.5.4.3"]="commonName",e.commonName="2.5.4.3",e["2.5.4.5"]="serialName",e.serialName="2.5.4.5",e["2.5.4.6"]="countryName",e.countryName="2.5.4.6",e["2.5.4.7"]="localityName",e.localityName="2.5.4.7",e["2.5.4.8"]="stateOrProvinceName",e.stateOrProvinceName="2.5.4.8",e["2.5.4.10"]="organizationName",e.organizationName="2.5.4.10",e["2.5.4.11"]="organizationalUnitName",e.organizationalUnitName="2.5.4.11",e["2.16.840.1.113730.1.1"]="nsCertType",e.nsCertType="2.16.840.1.113730.1.1",e["2.5.29.1"]="authorityKeyIdentifier",e["2.5.29.2"]="keyAttributes",e["2.5.29.3"]="certificatePolicies",e["2.5.29.4"]="keyUsageRestriction",e["2.5.29.5"]="policyMapping",e["2.5.29.6"]="subtreesConstraint",e["2.5.29.7"]="subjectAltName",e["2.5.29.8"]="issuerAltName",e["2.5.29.9"]="subjectDirectoryAttributes",e["2.5.29.10"]="basicConstraints",e["2.5.29.11"]="nameConstraints",e["2.5.29.12"]="policyConstraints",e["2.5.29.13"]="basicConstraints",e["2.5.29.14"]="subjectKeyIdentifier",e.subjectKeyIdentifier="2.5.29.14",e["2.5.29.15"]="keyUsage",e.keyUsage="2.5.29.15",e["2.5.29.16"]="privateKeyUsagePeriod",e["2.5.29.17"]="subjectAltName",e.subjectAltName="2.5.29.17",e["2.5.29.18"]="issuerAltName",e.issuerAltName="2.5.29.18",e["2.5.29.19"]="basicConstraints",e.basicConstraints="2.5.29.19",e["2.5.29.20"]="cRLNumber",e["2.5.29.21"]="cRLReason",e["2.5.29.22"]="expirationDate",e["2.5.29.23"]="instructionCode",e["2.5.29.24"]="invalidityDate",e["2.5.29.25"]="cRLDistributionPoints",e["2.5.29.26"]="issuingDistributionPoint",e["2.5.29.27"]="deltaCRLIndicator",e["2.5.29.28"]="issuingDistributionPoint",e["2.5.29.29"]="certificateIssuer",
e["2.5.29.30"]="nameConstraints",e["2.5.29.31"]="cRLDistributionPoints",e["2.5.29.32"]="certificatePolicies",e["2.5.29.33"]="policyMappings",e["2.5.29.34"]="policyConstraints",e["2.5.29.35"]="authorityKeyIdentifier",e["2.5.29.36"]="policyConstraints",e["2.5.29.37"]="extKeyUsage",e.extKeyUsage="2.5.29.37",e["2.5.29.46"]="freshestCRL",e["2.5.29.54"]="inhibitAnyPolicy",e["1.3.6.1.5.5.7.3.1"]="serverAuth",e.serverAuth="1.3.6.1.5.5.7.3.1",e["1.3.6.1.5.5.7.3.2"]="clientAuth",e.clientAuth="1.3.6.1.5.5.7.3.2",e["1.3.6.1.5.5.7.3.3"]="codeSigning",e.codeSigning="1.3.6.1.5.5.7.3.3",e["1.3.6.1.5.5.7.3.4"]="emailProtection",e.emailProtection="1.3.6.1.5.5.7.3.4",e["1.3.6.1.5.5.7.3.8"]="timeStamping",e.timeStamping="1.3.6.1.5.5.7.3.8"}var e="oids";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){var e=t.asn1=t.asn1||{};e.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},e.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},e.create=function(e,r,i,n){if(t.util.isArray(n)){for(var o=[],a=0;a<n.length;++a)void 0!==n[a]&&o.push(n[a]);n=o}return{tagClass:e,type:r,constructed:i,composed:i||t.util.isArray(n),value:n}};var r=e.getBerValueLength=function(t){var e=t.getByte();if(128!==e){var r,i=128&e;return r=i?t.getInt((127&e)<<3):e}};e.fromDer=function(i,n){if(void 0===n&&(n=!0),"string"==typeof i&&(i=t.util.createBuffer(i)),i.length()<2){var o=new Error("Too few bytes to parse DER.");throw o.bytes=i.length(),o}var a=i.getByte(),s=192&a,u=31&a,l=r(i);if(i.length()<l){if(n){var o=new Error("Too few bytes to read ASN.1 value.");throw o.detail=i.length()+" < "+l,o}l=i.length()}var c,f=32===(32&a),h=f;if(!h&&s===e.Class.UNIVERSAL&&u===e.Type.BITSTRING&&l>1){var p=i.read,d=i.getByte();if(0===d){a=i.getByte();var y=192&a;if(y===e.Class.UNIVERSAL||y===e.Class.CONTEXT_SPECIFIC)try{var g=r(i);h=g===l-(i.read-p),h&&(++p,--l)}catch(v){}}i.read=p}if(h)if(c=[],void 0===l)for(;;){if(i.bytes(2)===String.fromCharCode(0,0)){i.getBytes(2);break}c.push(e.fromDer(i,n))}else for(var m=i.length();l>0;)c.push(e.fromDer(i,n)),l-=m-i.length(),m=i.length();else{if(void 0===l){if(n)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=i.length()}if(u===e.Type.BMPSTRING){c="";for(var b=0;l>b;b+=2)c+=String.fromCharCode(i.getInt16())}else c=i.getBytes(l)}return e.create(s,u,f,c)},e.toDer=function(r){var i=t.util.createBuffer(),n=r.tagClass|r.type,o=t.util.createBuffer();if(r.composed){r.constructed?n|=32:o.putByte(0);for(var a=0;a<r.value.length;++a)void 0!==r.value[a]&&o.putBuffer(e.toDer(r.value[a]))}else if(r.type===e.Type.BMPSTRING)for(var a=0;a<r.value.length;++a)o.putInt16(r.value.charCodeAt(a));else o.putBytes(r.value);if(i.putByte(n),o.length()<=127)i.putByte(127&o.length());else{var s=o.length(),u="";do u+=String.fromCharCode(255&s),s>>>=8;while(s>0);i.putByte(128|u.length);for(var a=u.length-1;a>=0;--a)i.putByte(u.charCodeAt(a))}return i.putBuffer(o),i},e.oidToDer=function(e){var r=e.split("."),i=t.util.createBuffer();i.putByte(40*parseInt(r[0],10)+parseInt(r[1],10));for(var n,o,a,s,u=2;u<r.length;++u){n=!0,o=[],a=parseInt(r[u],10);do s=127&a,a>>>=7,n||(s|=128),o.push(s),n=!1;while(a>0);for(var l=o.length-1;l>=0;--l)i.putByte(o[l])}return i},e.derToOid=function(e){var r;"string"==typeof e&&(e=t.util.createBuffer(e));var i=e.getByte();r=Math.floor(i/40)+"."+i%40;for(var n=0;e.length()>0;)i=e.getByte(),n<<=7,128&i?n+=127&i:(r+="."+(n+i),n=0);return r},e.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var i=parseInt(t.substr(2,2),10)-1,n=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=0;if(t.length>11){var u=t.charAt(10),l=10;"+"!==u&&"-"!==u&&(s=parseInt(t.substr(10,2),10),l+=2)}if(e.setUTCFullYear(r,i,n),e.setUTCHours(o,a,s,0),l&&(u=t.charAt(l),"+"===u||"-"===u)){var c=parseInt(t.substr(l+1,2),10),f=parseInt(t.substr(l+4,2),10),h=60*c+f;h*=6e4,"+"===u?e.setTime(+e-h):e.setTime(+e+h)}return e},e.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),i=parseInt(t.substr(4,2),10)-1,n=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),s=parseInt(t.substr(12,2),10),u=0,l=0,c=!1;"Z"===t.charAt(t.length-1)&&(c=!0);var f=t.length-5,h=t.charAt(f);if("+"===h||"-"===h){var p=parseInt(t.substr(f+1,2),10),d=parseInt(t.substr(f+4,2),10);l=60*p+d,l*=6e4,"+"===h&&(l*=-1),c=!0}return"."===t.charAt(14)&&(u=1e3*parseFloat(t.substr(14),10)),c?(e.setUTCFullYear(r,i,n),e.setUTCHours(o,a,s,u),e.setTime(+e+l)):(e.setFullYear(r,i,n),e.setHours(o,a,s,u)),e},e.dateToUtcTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z"},e.dateToGeneralizedTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z"},e.integerToDer=function(e){var r=t.util.createBuffer();if(e>=-128&&128>e)return r.putSignedInt(e,8);if(e>=-32768&&32768>e)return r.putSignedInt(e,16);if(e>=-8388608&&8388608>e)return r.putSignedInt(e,24);if(e>=-2147483648&&2147483648>e)return r.putSignedInt(e,32);var i=new Error("Integer too large; max is 32-bits.");throw i.integer=e,i},e.derToInteger=function(e){"string"==typeof e&&(e=t.util.createBuffer(e));var r=8*e.length();if(r>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(r)},e.validate=function(r,i,n,o){var a=!1;if(r.tagClass!==i.tagClass&&"undefined"!=typeof i.tagClass||r.type!==i.type&&"undefined"!=typeof i.type)o&&(r.tagClass!==i.tagClass&&o.push("["+i.name+'] Expected tag class "'+i.tagClass+'", got "'+r.tagClass+'"'),r.type!==i.type&&o.push("["+i.name+'] Expected type "'+i.type+'", got "'+r.type+'"'));else if(r.constructed===i.constructed||"undefined"==typeof i.constructed){if(a=!0,i.value&&t.util.isArray(i.value))for(var s=0,u=0;a&&u<i.value.length;++u)a=i.value[u].optional||!1,r.value[s]&&(a=e.validate(r.value[s],i.value[u],n,o),a?++s:i.value[u].optional&&(a=!0)),!a&&o&&o.push("["+i.name+'] Tag class "'+i.tagClass+'", type "'+i.type+'" expected value length "'+i.value.length+'", got "'+r.value.length+'"');a&&n&&(i.capture&&(n[i.capture]=r.value),i.captureAsn1&&(n[i.captureAsn1]=r))}else o&&o.push("["+i.name+'] Expected constructed "'+i.constructed+'", got "'+r.constructed+'"');return a};var i=/[^\\u0000-\\u00ff]/;e.prettyPrint=function(r,n,o){var a="";n=n||0,o=o||2,n>0&&(a+="\n");for(var s="",u=0;n*o>u;++u)s+=" ";switch(a+=s+"Tag: ",r.tagClass){case e.Class.UNIVERSAL:a+="Universal:";break;case e.Class.APPLICATION:a+="Application:";break;case e.Class.CONTEXT_SPECIFIC:a+="Context-Specific:";break;case e.Class.PRIVATE:a+="Private:"}if(r.tagClass===e.Class.UNIVERSAL)switch(a+=r.type,r.type){case e.Type.NONE:a+=" (None)";break;case e.Type.BOOLEAN:a+=" (Boolean)";break;case e.Type.BITSTRING:a+=" (Bit string)";break;case e.Type.INTEGER:a+=" (Integer)";break;case e.Type.OCTETSTRING:a+=" (Octet string)";break;case e.Type.NULL:a+=" (Null)";break;case e.Type.OID:a+=" (Object Identifier)";break;case e.Type.ODESC:a+=" (Object Descriptor)";break;case e.Type.EXTERNAL:a+=" (External or Instance of)";break;case e.Type.REAL:a+=" (Real)";break;case e.Type.ENUMERATED:a+=" (Enumerated)";break;case e.Type.EMBEDDED:a+=" (Embedded PDV)";break;case e.Type.UTF8:a+=" (UTF8)";break;case e.Type.ROID:a+=" (Relative Object Identifier)";break;case e.Type.SEQUENCE:a+=" (Sequence)";break;case e.Type.SET:a+=" (Set)";break;case e.Type.PRINTABLESTRING:a+=" (Printable String)";break;case e.Type.IA5String:a+=" (IA5String (ASCII))";break;case e.Type.UTCTIME:a+=" (UTC time)";break;case e.Type.GENERALIZEDTIME:a+=" (Generalized time)";break;case e.Type.BMPSTRING:a+=" (BMP String)"}else a+=r.type;if(a+="\n",a+=s+"Constructed: "+r.constructed+"\n",r.composed){for(var l=0,c="",u=0;u<r.value.length;++u)void 0!==r.value[u]&&(l+=1,c+=e.prettyPrint(r.value[u],n+1,o),u+1<r.value.length&&(c+=","));a+=s+"Sub values: "+l+c}else{if(a+=s+"Value: ",r.type===e.Type.OID){var f=e.derToOid(r.value);a+=f,t.pki&&t.pki.oids&&f in t.pki.oids&&(a+=" ("+t.pki.oids[f]+") ")}if(r.type===e.Type.INTEGER)try{a+=e.derToInteger(r.value)}catch(h){a+="0x"+t.util.bytesToHex(r.value)}else r.type===e.Type.OCTETSTRING?(i.test(r.value)||(a+="("+r.value+") "),a+="0x"+t.util.bytesToHex(r.value)):a+=r.type===e.Type.UTF8?t.util.decodeUtf8(r.value):r.type===e.Type.PRINTABLESTRING||r.type===e.Type.IA5String?r.value:i.test(r.value)?"0x"+t.util.bytesToHex(r.value):0===r.value.length?"[null]":r.value}return a}}var e="asn1";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util","./oids"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(){n=String.fromCharCode(128),n+=t.util.fillString(String.fromCharCode(0),64),o=!0}function r(t,e,r){for(var i,n,o,a,s,u,l,c,f=r.length();f>=64;){for(n=t.h0,o=t.h1,a=t.h2,s=t.h3,u=t.h4,c=0;16>c;++c)i=r.getInt32(),e[c]=i,l=s^o&(a^s),i=(n<<5|n>>>27)+l+u+1518500249+i,u=s,s=a,a=o<<30|o>>>2,o=n,n=i;for(;20>c;++c)i=e[c-3]^e[c-8]^e[c-14]^e[c-16],i=i<<1|i>>>31,e[c]=i,l=s^o&(a^s),i=(n<<5|n>>>27)+l+u+1518500249+i,u=s,s=a,a=o<<30|o>>>2,o=n,n=i;for(;32>c;++c)i=e[c-3]^e[c-8]^e[c-14]^e[c-16],i=i<<1|i>>>31,e[c]=i,l=o^a^s,i=(n<<5|n>>>27)+l+u+1859775393+i,u=s,s=a,a=o<<30|o>>>2,o=n,n=i;for(;40>c;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,l=o^a^s,i=(n<<5|n>>>27)+l+u+1859775393+i,u=s,s=a,a=o<<30|o>>>2,o=n,n=i;for(;60>c;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,l=o&a|s&(o^a),i=(n<<5|n>>>27)+l+u+2400959708+i,u=s,s=a,a=o<<30|o>>>2,o=n,n=i;for(;80>c;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,l=o^a^s,i=(n<<5|n>>>27)+l+u+3395469782+i,u=s,s=a,a=o<<30|o>>>2,o=n,n=i;t.h0=t.h0+n|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+s|0,t.h4=t.h4+u|0,f-=64}}var i=t.sha1=t.sha1||{};t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},t.md.sha1=t.md.algorithms.sha1=i,i.create=function(){o||e();var i=null,a=t.util.createBuffer(),s=new Array(80),u={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,messageLength64:[0,0]};return u.start=function(){return u.messageLength=0,u.messageLength64=[0,0],a=t.util.createBuffer(),i={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},u},u.start(),u.update=function(e,n){return"utf8"===n&&(e=t.util.encodeUtf8(e)),u.messageLength+=e.length,u.messageLength64[0]+=e.length/4294967296>>>0,u.messageLength64[1]+=e.length>>>0,a.putBytes(e),r(i,s,a),(a.read>2048||0===a.length())&&a.compact(),u},u.digest=function(){var e=t.util.createBuffer();e.putBytes(a.bytes()),e.putBytes(n.substr(0,64-(u.messageLength64[1]+8&63))),e.putInt32(u.messageLength64[0]<<3|u.messageLength64[0]>>>28),e.putInt32(u.messageLength64[1]<<3);var o={h0:i.h0,h1:i.h1,h2:i.h2,h3:i.h3,h4:i.h4};r(o,s,e);var l=t.util.createBuffer();return l.putInt32(o.h0),l.putInt32(o.h1),l.putInt32(o.h2),l.putInt32(o.h3),l.putInt32(o.h4),l},u};var n=null,o=!1}var e="sha1";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(){n=String.fromCharCode(128),n+=t.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0}function r(t,e,r){for(var i,n,o,s,u,l,c,f,h,p,d,y,g,v,m,b=r.length();b>=64;){for(c=0;16>c;++c)e[c]=r.getInt32();for(;64>c;++c)i=e[c-2],i=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,n=e[c-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,e[c]=i+e[c-7]+n+e[c-16]|0;for(f=t.h0,h=t.h1,p=t.h2,d=t.h3,y=t.h4,g=t.h5,v=t.h6,m=t.h7,c=0;64>c;++c)s=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),u=v^y&(g^v),o=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),l=f&h|p&(f^h),i=m+s+u+a[c]+e[c],n=o+l,m=v,v=g,g=y,y=d+i|0,d=p,p=h,h=f,f=i+n|0;t.h0=t.h0+f|0,t.h1=t.h1+h|0,t.h2=t.h2+p|0,t.h3=t.h3+d|0,t.h4=t.h4+y|0,t.h5=t.h5+g|0,t.h6=t.h6+v|0,t.h7=t.h7+m|0,b-=64}}var i=t.sha256=t.sha256||{};t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},t.md.sha256=t.md.algorithms.sha256=i,i.create=function(){o||e();var i=null,a=t.util.createBuffer(),s=new Array(64),u={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,messageLength64:[0,0]};return u.start=function(){return u.messageLength=0,u.messageLength64=[0,0],a=t.util.createBuffer(),i={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},u},u.start(),u.update=function(e,n){return"utf8"===n&&(e=t.util.encodeUtf8(e)),u.messageLength+=e.length,u.messageLength64[0]+=e.length/4294967296>>>0,u.messageLength64[1]+=e.length>>>0,a.putBytes(e),r(i,s,a),(a.read>2048||0===a.length())&&a.compact(),u},u.digest=function(){var e=t.util.createBuffer();e.putBytes(a.bytes()),e.putBytes(n.substr(0,64-(u.messageLength64[1]+8&63))),e.putInt32(u.messageLength64[0]<<3|u.messageLength64[0]>>>28),e.putInt32(u.messageLength64[1]<<3);var o={h0:i.h0,h1:i.h1,h2:i.h2,h3:i.h3,h4:i.h4,h5:i.h5,h6:i.h6,h7:i.h7};r(o,s,e);var l=t.util.createBuffer();return l.putInt32(o.h0),l.putInt32(o.h1),l.putInt32(o.h2),l.putInt32(o.h3),l.putInt32(o.h4),l.putInt32(o.h5),l.putInt32(o.h6),l.putInt32(o.h7),l},u};var n=null,o=!1,a=null}var e="sha256";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(){o=String.fromCharCode(128),o+=t.util.fillString(String.fromCharCode(0),128),s=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],u={},u["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0}function r(t,e,r){for(var i,n,o,a,u,l,c,f,h,p,d,y,g,v,m,b,B,S,C,A,I,w,E,T,k,_,R,N,D,P,x,L,O,F,U,M=r.length();M>=128;){for(D=0;16>D;++D)e[D][0]=r.getInt32()>>>0,e[D][1]=r.getInt32()>>>0;for(;80>D;++D)L=e[D-2],P=L[0],x=L[1],i=((P>>>19|x<<13)^(x>>>29|P<<3)^P>>>6)>>>0,n=((P<<13|x>>>19)^(x<<3|P>>>29)^(P<<26|x>>>6))>>>0,F=e[D-15],P=F[0],x=F[1],o=((P>>>1|x<<31)^(P>>>8|x<<24)^P>>>7)>>>0,a=((P<<31|x>>>1)^(P<<24|x>>>8)^(P<<25|x>>>7))>>>0,O=e[D-7],U=e[D-16],x=n+O[1]+a+U[1],e[D][0]=i+O[0]+o+U[0]+(x/4294967296>>>0)>>>0,e[D][1]=x>>>0;for(g=t[0][0],v=t[0][1],m=t[1][0],b=t[1][1],B=t[2][0],S=t[2][1],C=t[3][0],A=t[3][1],I=t[4][0],w=t[4][1],E=t[5][0],T=t[5][1],k=t[6][0],_=t[6][1],R=t[7][0],N=t[7][1],D=0;80>D;++D)c=((I>>>14|w<<18)^(I>>>18|w<<14)^(w>>>9|I<<23))>>>0,f=((I<<18|w>>>14)^(I<<14|w>>>18)^(w<<23|I>>>9))>>>0,h=(k^I&(E^k))>>>0,p=(_^w&(T^_))>>>0,u=((g>>>28|v<<4)^(v>>>2|g<<30)^(v>>>7|g<<25))>>>0,l=((g<<4|v>>>28)^(v<<30|g>>>2)^(v<<25|g>>>7))>>>0,d=(g&m|B&(g^m))>>>0,y=(v&b|S&(v^b))>>>0,x=N+f+p+s[D][1]+e[D][1],i=R+c+h+s[D][0]+e[D][0]+(x/4294967296>>>0)>>>0,n=x>>>0,x=l+y,o=u+d+(x/4294967296>>>0)>>>0,a=x>>>0,R=k,N=_,k=E,_=T,E=I,T=w,x=A+n,I=C+i+(x/4294967296>>>0)>>>0,w=x>>>0,C=B,A=S,B=m,S=b,m=g,b=v,x=n+a,g=i+o+(x/4294967296>>>0)>>>0,v=x>>>0;x=t[0][1]+v,t[0][0]=t[0][0]+g+(x/4294967296>>>0)>>>0,t[0][1]=x>>>0,x=t[1][1]+b,t[1][0]=t[1][0]+m+(x/4294967296>>>0)>>>0,t[1][1]=x>>>0,x=t[2][1]+S,t[2][0]=t[2][0]+B+(x/4294967296>>>0)>>>0,t[2][1]=x>>>0,x=t[3][1]+A,t[3][0]=t[3][0]+C+(x/4294967296>>>0)>>>0,t[3][1]=x>>>0,x=t[4][1]+w,t[4][0]=t[4][0]+I+(x/4294967296>>>0)>>>0,t[4][1]=x>>>0,x=t[5][1]+T,t[5][0]=t[5][0]+E+(x/4294967296>>>0)>>>0,t[5][1]=x>>>0,x=t[6][1]+_,t[6][0]=t[6][0]+k+(x/4294967296>>>0)>>>0,t[6][1]=x>>>0,x=t[7][1]+N,t[7][0]=t[7][0]+R+(x/4294967296>>>0)>>>0,t[7][1]=x>>>0,M-=128}}var i=t.sha512=t.sha512||{};t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},t.md.sha512=t.md.algorithms.sha512=i;var n=t.sha384=t.sha512.sha384=t.sha512.sha384||{};n.create=function(){return i.create("SHA-384")},t.md.sha384=t.md.algorithms.sha384=n,t.sha512.sha256=t.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},t.md["sha512/256"]=t.md.algorithms["sha512/256"]=t.sha512.sha256,t.sha512.sha224=t.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},t.md["sha512/224"]=t.md.algorithms["sha512/224"]=t.sha512.sha224,i.create=function(i){if(a||e(),"undefined"==typeof i&&(i="SHA-512"),!(i in u))throw new Error("Invalid SHA-512 algorithm: "+i);for(var n=u[i],s=null,l=t.util.createBuffer(),c=new Array(80),f=0;80>f;++f)c[f]=new Array(2);var h={algorithm:i.replace("-","").toLowerCase(),blockLength:128,digestLength:64,messageLength:0,messageLength128:[0,0,0,0]};return h.start=function(){h.messageLength=0,h.messageLength128=[0,0,0,0],l=t.util.createBuffer(),s=new Array(n.length);for(var e=0;e<n.length;++e)s[e]=n[e].slice(0);return h},h.start(),h.update=function(e,i){"utf8"===i&&(e=t.util.encodeUtf8(e)),h.messageLength+=e.length;var n=e.length;n=[n/4294967296>>>0,n>>>0];for(var o=3;o>=0;--o)h.messageLength128[o]+=n[1],n[1]=n[0]+(h.messageLength128[o]/4294967296>>>0),h.messageLength128[o]=h.messageLength128[o]>>>0,n[0]=n[1]/4294967296>>>0;return l.putBytes(e),r(s,c,l),(l.read>2048||0===l.length())&&l.compact(),h},h.digest=function(){var e=t.util.createBuffer();e.putBytes(l.bytes()),e.putBytes(o.substr(0,128-(h.messageLength128[3]+16&127)));for(var n=[],a=0;3>a;++a)n[a]=h.messageLength128[a]<<3|h.messageLength128[a-1]>>>28;n[3]=h.messageLength128[3]<<3,e.putInt32(n[0]),e.putInt32(n[1]),e.putInt32(n[2]),e.putInt32(n[3]);for(var u=new Array(s.length),a=0;a<s.length;++a)u[a]=s[a].slice(0);r(u,c,e);var f,p=t.util.createBuffer();f="SHA-512"===i?u.length:"SHA-384"===i?u.length-2:u.length-4;for(var a=0;f>a;++a)p.putInt32(u[a][0]),a===f-1&&"SHA-512/224"===i||p.putInt32(u[a][1]);return p},h};var o=null,a=!1,s=null,u=null}var e="sha512";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.md=t.md||{},t.md.algorithms={md5:t.md5,sha1:t.sha1,sha256:t.sha256},t.md.md5=t.md5,t.md.sha1=t.sha1,t.md.sha256=t.sha256}var e="md";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./md5","./sha1","./sha256","./sha512"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){var e=t.hmac=t.hmac||{};e.create=function(){var e=null,r=null,i=null,n=null,o={};return o.start=function(o,a){if(null!==o)if("string"==typeof o){if(o=o.toLowerCase(),!(o in t.md.algorithms))throw new Error('Unknown hash algorithm "'+o+'"');r=t.md.algorithms[o].create()}else r=o;if(null===a)a=e;else{if("string"==typeof a)a=t.util.createBuffer(a);else if(t.util.isArray(a)){var s=a;a=t.util.createBuffer();for(var u=0;u<s.length;++u)a.putByte(s[u])}var l=a.length();l>r.blockLength&&(r.start(),r.update(a.bytes()),a=r.digest()),i=t.util.createBuffer(),n=t.util.createBuffer(),l=a.length();for(var u=0;l>u;++u){var s=a.at(u);i.putByte(54^s),n.putByte(92^s)}if(l<r.blockLength)for(var s=r.blockLength-l,u=0;s>u;++u)i.putByte(54),n.putByte(92);e=a,i=i.bytes(),n=n.bytes()}r.start(),r.update(i)},o.update=function(t){r.update(t)},o.getMac=function(){var t=r.digest().bytes();return r.start(),r.update(n),r.update(t),r.digest()},o.digest=o.getMac,o}}var e="hmac";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./md","./util"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){var e="undefined"!=typeof process&&process.versions&&process.versions.node,r=null;t.disableNativeCode||!e||process.versions["node-webkit"]||(r=require("crypto"));var i=t.prng=t.prng||{};i.create=function(e){function i(t){if(s.pools[0].messageLength>=32)return o(),t();var e=32-s.pools[0].messageLength<<5;s.seedFile(e,function(e,r){return e?t(e):(s.collect(r),o(),void t())})}function n(){if(s.pools[0].messageLength>=32)return o();var t=32-s.pools[0].messageLength<<5;s.collect(s.seedFileSync(t)),o()}function o(){var t=s.plugin.md.create();t.update(s.pools[0].digest().getBytes()),s.pools[0].start();for(var e=1,r=1;32>r;++r)e=31===e?2147483648:e<<2,e%s.reseeds===0&&(t.update(s.pools[r].digest().getBytes()),s.pools[r].start());var i=t.digest().getBytes();t.start(),t.update(i);var n=t.digest().getBytes();s.key=s.plugin.formatKey(i),s.seed=s.plugin.formatSeed(n),s.reseeds=4294967295===s.reseeds?0:s.reseeds+1,s.generated=0}function a(e){var r=null;if("undefined"!=typeof window){var i=window.crypto||window.msCrypto;i&&i.getRandomValues&&(r=function(t){return i.getRandomValues(t)})}var n=t.util.createBuffer();if(r)for(;n.length()<e;){var o=Math.max(1,Math.min(e-n.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{r(a);for(var s=0;s<a.length;++s)n.putInt32(a[s])}catch(u){if(!("undefined"!=typeof QuotaExceededError&&u instanceof QuotaExceededError))throw u}}if(n.length()<e)for(var l,c,f,h=Math.floor(65536*Math.random());n.length()<e;){c=16807*(65535&h),l=16807*(h>>16),c+=(32767&l)<<16,c+=l>>15,c=(2147483647&c)+(c>>31),h=4294967295&c;for(var s=0;3>s;++s)f=h>>>(s<<3),f^=Math.floor(256*Math.random()),n.putByte(String.fromCharCode(255&f))}return n.getBytes(e)}for(var s={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0},u=e.md,l=new Array(32),c=0;32>c;++c)l[c]=u.create();return s.pools=l,s.pool=0,s.generate=function(e,r){function n(f){if(f)return r(f);if(c.length()>=e)return r(null,c.getBytes(e));if(s.generated>1048575&&(s.key=null),null===s.key)return t.util.nextTick(function(){i(n)});var h=o(s.key,s.seed);s.generated+=h.length,c.putBytes(h),s.key=u(o(s.key,a(s.seed))),s.seed=l(o(s.key,s.seed)),t.util.setImmediate(n)}if(!r)return s.generateSync(e);var o=s.plugin.cipher,a=s.plugin.increment,u=s.plugin.formatKey,l=s.plugin.formatSeed,c=t.util.createBuffer();s.key=null,n()},s.generateSync=function(e){var r=s.plugin.cipher,i=s.plugin.increment,o=s.plugin.formatKey,a=s.plugin.formatSeed;s.key=null;for(var u=t.util.createBuffer();u.length()<e;){s.generated>1048575&&(s.key=null),null===s.key&&n();var l=r(s.key,s.seed);s.generated+=l.length,u.putBytes(l),s.key=o(r(s.key,i(s.seed))),s.seed=a(r(s.key,s.seed))}return u.getBytes(e)},r?(s.seedFile=function(t,e){r.randomBytes(t,function(t,r){return t?e(t):void e(null,r.toString())})},s.seedFileSync=function(t){return r.randomBytes(t).toString()}):(s.seedFile=function(t,e){try{e(null,a(t))}catch(r){e(r)}},s.seedFileSync=a),s.collect=function(t){for(var e=t.length,r=0;e>r;++r)s.pools[s.pool].update(t.substr(r,1)),s.pool=31===s.pool?0:s.pool+1},s.collectInt=function(t,e){for(var r="",i=0;e>i;i+=8)r+=String.fromCharCode(t>>i&255);s.collect(r)},s.registerWorker=function(t){if(t===self)s.seedFile=function(t,e){function r(t){var i=t.data;i.forge&&i.forge.prng&&(self.removeEventListener("message",r),e(i.forge.prng.err,i.forge.prng.bytes))}self.addEventListener("message",r),self.postMessage({forge:{prng:{needed:t}}})};else{var e=function(e){var r=e.data;r.forge&&r.forge.prng&&s.seedFile(r.forge.prng.needed,function(e,r){t.postMessage({forge:{prng:{err:e,bytes:r}}})})};t.addEventListener("message",e)}},s}}var e="prng";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./md","./util"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.random&&t.random.getBytes||!function(e){function r(){var e=t.prng.create(i);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}var i={},n=new Array(4),o=t.util.createBuffer();i.formatKey=function(e){var r=t.util.createBuffer(e);return e=new Array(4),e[0]=r.getInt32(),e[1]=r.getInt32(),e[2]=r.getInt32(),e[3]=r.getInt32(),t.aes._expandKey(e,!1)},i.formatSeed=function(e){var r=t.util.createBuffer(e);return e=new Array(4),e[0]=r.getInt32(),e[1]=r.getInt32(),e[2]=r.getInt32(),e[3]=r.getInt32(),e},i.cipher=function(e,r){return t.aes._updateBlock(e,r,n,!1),o.putInt32(n[0]),o.putInt32(n[1]),o.putInt32(n[2]),o.putInt32(n[3]),o.getBytes()},i.increment=function(t){
return++t[3],t},i.md=t.md.sha256;var a=r(),s="undefined"!=typeof process&&process.versions&&process.versions.node,u=null;if("undefined"!=typeof window){var l=window.crypto||window.msCrypto;l&&l.getRandomValues&&(u=function(t){return l.getRandomValues(t)})}if(t.disableNativeCode||!s&&!u){if("undefined"==typeof window||void 0===window.document,a.collectInt(+new Date,32),"undefined"!=typeof navigator){var c="";for(var f in navigator)try{"string"==typeof navigator[f]&&(c+=navigator[f])}catch(h){}a.collect(c),c=null}e&&(e().mousemove(function(t){a.collectInt(t.clientX,16),a.collectInt(t.clientY,16)}),e().keypress(function(t){a.collectInt(t.charCode,8)}))}if(t.random)for(var f in a)t.random[f]=a[f];else t.random=a;t.random.createInstance=r}("undefined"!=typeof jQuery?jQuery:null)}var e="random";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./aes","./md","./prng","./util"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(t,e,r){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function r(){return new e(null)}function i(t,e,r,i,n,o){for(;--o>=0;){var a=e*this.data[t++]+r.data[i]+n;n=Math.floor(a/67108864),r.data[i++]=67108863&a}return n}function n(t,e,r,i,n,o){for(var a=32767&e,s=e>>15;--o>=0;){var u=32767&this.data[t],l=this.data[t++]>>15,c=s*u+l*a;u=a*u+((32767&c)<<15)+r.data[i]+(1073741823&n),n=(u>>>30)+(c>>>15)+s*l+(n>>>30),r.data[i++]=1073741823&u}return n}function o(t,e,r,i,n,o){for(var a=16383&e,s=e>>14;--o>=0;){var u=16383&this.data[t],l=this.data[t++]>>14,c=s*u+l*a;u=a*u+((16383&c)<<14)+r.data[i]+n,n=(u>>28)+(c>>14)+s*l,r.data[i++]=268435455&u}return n}function a(t){return oe.charAt(t)}function s(t,e){var r=ae[t.charCodeAt(e)];return null==r?-1:r}function u(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function l(t){this.t=1,this.s=0>t?-1:0,t>0?this.data[0]=t:-1>t?this.data[0]=t+this.DV:this.t=0}function c(t){var e=r();return e.fromInt(t),e}function f(t,r){var i;if(16==r)i=4;else if(8==r)i=3;else if(256==r)i=8;else if(2==r)i=1;else if(32==r)i=5;else{if(4!=r)return void this.fromRadix(t,r);i=2}this.t=0,this.s=0;for(var n=t.length,o=!1,a=0;--n>=0;){var u=8==i?255&t[n]:s(t,n);0>u?"-"==t.charAt(n)&&(o=!0):(o=!1,0==a?this.data[this.t++]=u:a+i>this.DB?(this.data[this.t-1]|=(u&(1<<this.DB-a)-1)<<a,this.data[this.t++]=u>>this.DB-a):this.data[this.t-1]|=u<<a,a+=i,a>=this.DB&&(a-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&e.ZERO.subTo(this,this)}function h(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function p(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,i=(1<<e)-1,n=!1,o="",s=this.t,u=this.DB-s*this.DB%e;if(s-- >0)for(u<this.DB&&(r=this.data[s]>>u)>0&&(n=!0,o=a(r));s>=0;)e>u?(r=(this.data[s]&(1<<u)-1)<<e-u,r|=this.data[--s]>>(u+=this.DB-e)):(r=this.data[s]>>(u-=e)&i,0>=u&&(u+=this.DB,--s)),r>0&&(n=!0),n&&(o+=a(r));return n?o:"0"}function d(){var t=r();return e.ZERO.subTo(this,t),t}function y(){return this.s<0?this.negate():this}function g(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(e=r-t.t,0!=e)return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this.data[r]-t.data[r]))return e;return 0}function v(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function m(){return this.t<=0?0:this.DB*(this.t-1)+v(this.data[this.t-1]^this.s&this.DM)}function b(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function B(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function S(t,e){var r,i=t%this.DB,n=this.DB-i,o=(1<<n)-1,a=Math.floor(t/this.DB),s=this.s<<i&this.DM;for(r=this.t-1;r>=0;--r)e.data[r+a+1]=this.data[r]>>n|s,s=(this.data[r]&o)<<i;for(r=a-1;r>=0;--r)e.data[r]=0;e.data[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function C(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)return void(e.t=0);var i=t%this.DB,n=this.DB-i,o=(1<<i)-1;e.data[0]=this.data[r]>>i;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&o)<<n,e.data[a-r]=this.data[a]>>i;i>0&&(e.data[this.t-r-1]|=(this.s&o)<<n),e.t=this.t-r,e.clamp()}function A(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);n>r;)i+=this.data[r]-t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=0>i?-1:0,-1>i?e.data[r++]=this.DV+i:i>0&&(e.data[r++]=i),e.t=r,e.clamp()}function I(t,r){var i=this.abs(),n=t.abs(),o=i.t;for(r.t=o+n.t;--o>=0;)r.data[o]=0;for(o=0;o<n.t;++o)r.data[o+i.t]=i.am(0,n.data[o],r,o,0,i.t);r.s=0,r.clamp(),this.s!=t.s&&e.ZERO.subTo(r,r)}function w(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function E(t,i,n){var o=t.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=i&&i.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=r());var s=r(),u=this.s,l=t.s,c=this.DB-v(o.data[o.t-1]);c>0?(o.lShiftTo(c,s),a.lShiftTo(c,n)):(o.copyTo(s),a.copyTo(n));var f=s.t,h=s.data[f-1];if(0!=h){var p=h*(1<<this.F1)+(f>1?s.data[f-2]>>this.F2:0),d=this.FV/p,y=(1<<this.F1)/p,g=1<<this.F2,m=n.t,b=m-f,B=null==i?r():i;for(s.dlShiftTo(b,B),n.compareTo(B)>=0&&(n.data[n.t++]=1,n.subTo(B,n)),e.ONE.dlShiftTo(f,B),B.subTo(s,s);s.t<f;)s.data[s.t++]=0;for(;--b>=0;){var S=n.data[--m]==h?this.DM:Math.floor(n.data[m]*d+(n.data[m-1]+g)*y);if((n.data[m]+=s.am(0,S,n,b,0,f))<S)for(s.dlShiftTo(b,B),n.subTo(B,n);n.data[m]<--S;)n.subTo(B,n)}null!=i&&(n.drShiftTo(f,i),u!=l&&e.ZERO.subTo(i,i)),n.t=f,n.clamp(),c>0&&n.rShiftTo(c,n),0>u&&e.ZERO.subTo(n,n)}}}function T(t){var i=r();return this.abs().divRemTo(t,null,i),this.s<0&&i.compareTo(e.ZERO)>0&&t.subTo(i,i),i}function k(t){this.m=t}function _(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function R(t){return t}function N(t){t.divRemTo(this.m,null,t)}function D(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function P(t,e){t.squareTo(e),this.reduce(e)}function x(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function L(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function O(t){var i=r();return t.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),t.s<0&&i.compareTo(e.ZERO)>0&&this.m.subTo(i,i),i}function F(t){var e=r();return t.copyTo(e),this.reduce(e),e}function U(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t.data[e],i=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,i,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function M(t,e){t.squareTo(e),this.reduce(e)}function G(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function V(){return 0==(this.t>0?1&this.data[0]:this.s)}function j(t,i){if(t>4294967295||1>t)return e.ONE;var n=r(),o=r(),a=i.convert(this),s=v(t)-1;for(a.copyTo(n);--s>=0;)if(i.sqrTo(n,o),(t&1<<s)>0)i.mulTo(o,a,n);else{var u=n;n=o,o=u}return i.revert(n)}function K(t,e){var r;return r=256>t||e.isEven()?new k(e):new L(e),this.exp(t,r)}function q(){var t=r();return this.copyTo(t),t}function z(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function H(){return 0==this.t?this.s:this.data[0]<<24>>24}function W(){return 0==this.t?this.s:this.data[0]<<16>>16}function J(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Q(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function X(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=c(i),o=r(),a=r(),s="";for(this.divRemTo(n,o,a);o.signum()>0;)s=(i+a.intValue()).toString(t).substr(1)+s,o.divRemTo(n,o,a);return a.intValue().toString(t)+s}function Z(t,r){this.fromInt(0),null==r&&(r=10);for(var i=this.chunkSize(r),n=Math.pow(r,i),o=!1,a=0,u=0,l=0;l<t.length;++l){var c=s(t,l);0>c?"-"==t.charAt(l)&&0==this.signum()&&(o=!0):(u=r*u+c,++a>=i&&(this.dMultiply(n),this.dAddOffset(u,0),a=0,u=0))}a>0&&(this.dMultiply(Math.pow(r,a)),this.dAddOffset(u,0)),o&&e.ZERO.subTo(this,this)}function $(t,r,i){if("number"==typeof r)if(2>t)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),at,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var n=new Array,o=7&t;n.length=(t>>3)+1,r.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}}function Y(){var t=this.t,e=new Array;e[0]=this.s;var r,i=this.DB-t*this.DB%8,n=0;if(t-- >0)for(i<this.DB&&(r=this.data[t]>>i)!=(this.s&this.DM)>>i&&(e[n++]=r|this.s<<this.DB-i);t>=0;)8>i?(r=(this.data[t]&(1<<i)-1)<<8-i,r|=this.data[--t]>>(i+=this.DB-8)):(r=this.data[t]>>(i-=8)&255,0>=i&&(i+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==n&&(128&this.s)!=(128&r)&&++n,(n>0||r!=this.s)&&(e[n++]=r);return e}function tt(t){return 0==this.compareTo(t)}function et(t){return this.compareTo(t)<0?this:t}function rt(t){return this.compareTo(t)>0?this:t}function it(t,e,r){var i,n,o=Math.min(t.t,this.t);for(i=0;o>i;++i)r.data[i]=e(this.data[i],t.data[i]);if(t.t<this.t){for(n=t.s&this.DM,i=o;i<this.t;++i)r.data[i]=e(this.data[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=o;i<t.t;++i)r.data[i]=e(n,t.data[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function nt(t,e){return t&e}function ot(t){var e=r();return this.bitwiseTo(t,nt,e),e}function at(t,e){return t|e}function st(t){var e=r();return this.bitwiseTo(t,at,e),e}function ut(t,e){return t^e}function lt(t){var e=r();return this.bitwiseTo(t,ut,e),e}function ct(t,e){return t&~e}function ft(t){var e=r();return this.bitwiseTo(t,ct,e),e}function ht(){for(var t=r(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function pt(t){var e=r();return 0>t?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function dt(t){var e=r();return 0>t?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function yt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function gt(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+yt(this.data[t]);return this.s<0?this.t*this.DB:-1}function vt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function mt(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=vt(this.data[r]^e);return t}function bt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)}function Bt(t,r){var i=e.ONE.shiftLeft(t);return this.bitwiseTo(i,r,i),i}function St(t){return this.changeBit(t,at)}function Ct(t){return this.changeBit(t,ct)}function At(t){return this.changeBit(t,ut)}function It(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);n>r;)i+=this.data[r]+t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=0>i?-1:0,i>0?e.data[r++]=i:-1>i&&(e.data[r++]=this.DV+i),e.t=r,e.clamp()}function wt(t){var e=r();return this.addTo(t,e),e}function Et(t){var e=r();return this.subTo(t,e),e}function Tt(t){var e=r();return this.multiplyTo(t,e),e}function kt(t){var e=r();return this.divRemTo(t,e,null),e}function _t(t){var e=r();return this.divRemTo(t,null,e),e}function Rt(t){var e=r(),i=r();return this.divRemTo(t,e,i),new Array(e,i)}function Nt(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Dt(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Pt(){}function xt(t){return t}function Lt(t,e,r){t.multiplyTo(e,r)}function Ot(t,e){t.squareTo(e)}function Ft(t){return this.exp(t,new Pt)}function Ut(t,e,r){var i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;var n;for(n=r.t-this.t;n>i;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);n>i;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()}function Mt(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r.data[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r.data[this.t+i-e]=this.am(e-i,t.data[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)}function Gt(t){this.r2=r(),this.q3=r(),e.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Vt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=r();return t.copyTo(e),this.reduce(e),e}function jt(t){return t}function Kt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function qt(t,e){t.squareTo(e),this.reduce(e)}function zt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function Ht(t,e){var i,n,o=t.bitLength(),a=c(1);if(0>=o)return a;i=18>o?1:48>o?3:144>o?4:768>o?5:6,n=8>o?new k(e):e.isEven()?new Gt(e):new L(e);var s=new Array,u=3,l=i-1,f=(1<<i)-1;if(s[1]=n.convert(this),i>1){var h=r();for(n.sqrTo(s[1],h);f>=u;)s[u]=r(),n.mulTo(h,s[u-2],s[u]),u+=2}var p,d,y=t.t-1,g=!0,m=r();for(o=v(t.data[y])-1;y>=0;){for(o>=l?p=t.data[y]>>o-l&f:(p=(t.data[y]&(1<<o+1)-1)<<l-o,y>0&&(p|=t.data[y-1]>>this.DB+o-l)),u=i;0==(1&p);)p>>=1,--u;if((o-=u)<0&&(o+=this.DB,--y),g)s[p].copyTo(a),g=!1;else{for(;u>1;)n.sqrTo(a,m),n.sqrTo(m,a),u-=2;u>0?n.sqrTo(a,m):(d=a,a=m,m=d),n.mulTo(m,s[p],a)}for(;y>=0&&0==(t.data[y]&1<<o);)n.sqrTo(a,m),d=a,a=m,m=d,--o<0&&(o=this.DB-1,--y)}return n.revert(a)}function Wt(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),o=r.getLowestSetBit();if(0>o)return e;for(o>n&&(o=n),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function Jt(t){if(0>=t)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this.data[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this.data[i])%t;return r}function Qt(t){var r=t.isEven();if(this.isEven()&&r||0==t.signum())return e.ZERO;for(var i=t.clone(),n=this.clone(),o=c(1),a=c(0),s=c(0),u=c(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),r?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),r?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);i.compareTo(n)>=0?(i.subTo(n,i),r&&o.subTo(s,o),a.subTo(u,a)):(n.subTo(i,n),r&&s.subTo(o,s),u.subTo(a,u))}return 0!=n.compareTo(e.ONE)?e.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}function Xt(t){var e,r=this.abs();if(1==r.t&&r.data[0]<=se[se.length-1]){for(e=0;e<se.length;++e)if(r.data[0]==se[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<se.length;){for(var i=se[e],n=e+1;n<se.length&&ue>i;)i*=se[n++];for(i=r.modInt(i);n>e;)if(i%se[e++]==0)return!1}return r.millerRabin(t)}function Zt(t){var r=this.subtract(e.ONE),i=r.getLowestSetBit();if(0>=i)return!1;for(var n,o=r.shiftRight(i),a=$t(),s=0;t>s;++s){do n=new e(this.bitLength(),a);while(n.compareTo(e.ONE)<=0||n.compareTo(r)>=0);var u=n.modPow(o,this);if(0!=u.compareTo(e.ONE)&&0!=u.compareTo(r)){for(var l=1;l++<i&&0!=u.compareTo(r);)if(u=u.modPowInt(2,this),0==u.compareTo(e.ONE))return!1;if(0!=u.compareTo(r))return!1}}return!0}function $t(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}}}var Yt,te=0xdeadbeefcafe,ee=15715070==(16777215&te);"undefined"==typeof navigator?(e.prototype.am=o,Yt=28):ee&&"Microsoft Internet Explorer"==navigator.appName?(e.prototype.am=n,Yt=30):ee&&"Netscape"!=navigator.appName?(e.prototype.am=i,Yt=26):(e.prototype.am=o,Yt=28),e.prototype.DB=Yt,e.prototype.DM=(1<<Yt)-1,e.prototype.DV=1<<Yt;var re=52;e.prototype.FV=Math.pow(2,re),e.prototype.F1=re-Yt,e.prototype.F2=2*Yt-re;var ie,ne,oe="0123456789abcdefghijklmnopqrstuvwxyz",ae=new Array;for(ie="0".charCodeAt(0),ne=0;9>=ne;++ne)ae[ie++]=ne;for(ie="a".charCodeAt(0),ne=10;36>ne;++ne)ae[ie++]=ne;for(ie="A".charCodeAt(0),ne=10;36>ne;++ne)ae[ie++]=ne;k.prototype.convert=_,k.prototype.revert=R,k.prototype.reduce=N,k.prototype.mulTo=D,k.prototype.sqrTo=P,L.prototype.convert=O,L.prototype.revert=F,L.prototype.reduce=U,L.prototype.mulTo=G,L.prototype.sqrTo=M,e.prototype.copyTo=u,e.prototype.fromInt=l,e.prototype.fromString=f,e.prototype.clamp=h,e.prototype.dlShiftTo=b,e.prototype.drShiftTo=B,e.prototype.lShiftTo=S,e.prototype.rShiftTo=C,e.prototype.subTo=A,e.prototype.multiplyTo=I,e.prototype.squareTo=w,e.prototype.divRemTo=E,e.prototype.invDigit=x,e.prototype.isEven=V,e.prototype.exp=j,e.prototype.toString=p,e.prototype.negate=d,e.prototype.abs=y,e.prototype.compareTo=g,e.prototype.bitLength=m,e.prototype.mod=T,e.prototype.modPowInt=K,e.ZERO=c(0),e.ONE=c(1),Pt.prototype.convert=xt,Pt.prototype.revert=xt,Pt.prototype.mulTo=Lt,Pt.prototype.sqrTo=Ot,Gt.prototype.convert=Vt,Gt.prototype.revert=jt,Gt.prototype.reduce=Kt,Gt.prototype.mulTo=zt,Gt.prototype.sqrTo=qt;var se=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],ue=(1<<26)/se[se.length-1];e.prototype.chunkSize=J,e.prototype.toRadix=X,e.prototype.fromRadix=Z,e.prototype.fromNumber=$,e.prototype.bitwiseTo=it,e.prototype.changeBit=Bt,e.prototype.addTo=It,e.prototype.dMultiply=Nt,e.prototype.dAddOffset=Dt,e.prototype.multiplyLowerTo=Ut,e.prototype.multiplyUpperTo=Mt,e.prototype.modInt=Jt,e.prototype.millerRabin=Zt,e.prototype.clone=q,e.prototype.intValue=z,e.prototype.byteValue=H,e.prototype.shortValue=W,e.prototype.signum=Q,e.prototype.toByteArray=Y,e.prototype.equals=tt,e.prototype.min=et,e.prototype.max=rt,e.prototype.and=ot,e.prototype.or=st,e.prototype.xor=lt,e.prototype.andNot=ft,e.prototype.not=ht,e.prototype.shiftLeft=pt,e.prototype.shiftRight=dt,e.prototype.getLowestSetBit=gt,e.prototype.bitCount=mt,e.prototype.testBit=bt,e.prototype.setBit=St,e.prototype.clearBit=Ct,e.prototype.flipBit=At,e.prototype.add=wt,e.prototype.subtract=Et,e.prototype.multiply=Tt,e.prototype.divide=kt,e.prototype.remainder=_t,e.prototype.divideAndRemainder=Rt,e.prototype.modPow=Ht,e.prototype.modInverse=Qt,e.prototype.pow=Ft,e.prototype.gcd=Wt,e.prototype.isProbablePrime=Xt,t.jsbn=t.jsbn||{},t.jsbn.BigInteger=e}var e="jsbn";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e,r,i){i||(i=t.md.sha1.create());for(var n="",o=Math.ceil(r/i.digestLength),a=0;o>a;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);i.start(),i.update(e+s),n+=i.digest().getBytes()}return n.substring(0,r)}var r=t.pkcs1=t.pkcs1||{};r.encode_rsa_oaep=function(r,i,n){var o,a,s,u;"string"==typeof n?(o=n,a=arguments[3]||void 0,s=arguments[4]||void 0):n&&(o=n.label||void 0,a=n.seed||void 0,s=n.md||void 0,n.mgf1&&n.mgf1.md&&(u=n.mgf1.md)),s?s.start():s=t.md.sha1.create(),u||(u=s);var l=Math.ceil(r.n.bitLength()/8),c=l-2*s.digestLength-2;if(i.length>c){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=i.length,f.maxLength=c,f}o||(o=""),s.update(o,"raw");for(var h=s.digest(),p="",d=c-i.length,y=0;d>y;y++)p+="\x00";var g=h.getBytes()+p+""+i;if(a){if(a.length!==s.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=a.length,f.digestLength=s.digestLength,f}}else a=t.random.getBytes(s.digestLength);var v=e(a,l-s.digestLength-1,u),m=t.util.xorBytes(g,v,g.length),b=e(m,s.digestLength,u),B=t.util.xorBytes(a,b,a.length);return"\x00"+B+m},r.decode_rsa_oaep=function(r,i,n){var o,a,s;"string"==typeof n?(o=n,a=arguments[3]||void 0):n&&(o=n.label||void 0,a=n.md||void 0,n.mgf1&&n.mgf1.md&&(s=n.mgf1.md));var u=Math.ceil(r.n.bitLength()/8);if(i.length!==u){var l=new Error("RSAES-OAEP encoded message length is invalid.");throw l.length=i.length,l.expectedLength=u,l}if(void 0===a?a=t.md.sha1.create():a.start(),s||(s=a),u<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");o||(o=""),a.update(o,"raw");for(var c=a.digest().getBytes(),f=i.charAt(0),h=i.substring(1,a.digestLength+1),p=i.substring(1+a.digestLength),d=e(p,a.digestLength,s),y=t.util.xorBytes(h,d,h.length),g=e(y,u-a.digestLength-1,s),v=t.util.xorBytes(p,g,p.length),m=v.substring(0,a.digestLength),l="\x00"!==f,b=0;b<a.digestLength;++b)l|=c.charAt(b)!==m.charAt(b);for(var B=1,S=a.digestLength,C=a.digestLength;C<v.length;C++){var A=v.charCodeAt(C),I=1&A^1,w=B?65534:0;l|=A&w,B&=I,S+=B}if(l||1!==v.charCodeAt(S))throw new Error("Invalid RSAES-OAEP padding.");return v.substring(S+1)}}var e="pkcs1";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util","./random","./sha1"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e,r,i){var n=t.util.createBuffer(),o=Math.ceil(r.n.bitLength()/8);if(e.length>o-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=o-11,a}n.putByte(0),n.putByte(i);var s,u=o-3-e.length;if(0===i||1===i){s=0===i?0:255;for(var l=0;u>l;++l)n.putByte(s)}else for(;u>0;){for(var c=0,f=t.random.getBytes(u),l=0;u>l;++l)s=f.charCodeAt(l),0===s?++c:n.putByte(s);u=c}return n.putByte(0),n.putBytes(e),n}function r(e,r,i,n){var o=Math.ceil(r.n.bitLength()/8),a=t.util.createBuffer(e),s=a.getByte(),u=a.getByte();if(0!==s||i&&0!==u&&1!==u||!i&&2!=u||i&&0===u&&"undefined"==typeof n)throw new Error("Encryption block is invalid.");var l=0;if(0===u){l=o-3-n;for(var c=0;l>c;++c)if(0!==a.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(l=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++l}else if(2===u)for(l=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++l}var f=a.getByte();if(0!==f||l!==o-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function i(e,r,i){function n(){o(e.pBits,function(t,r){return t?i(t):(e.p=r,null!==e.q?s(t,e.q):void o(e.qBits,s))})}function o(e,r){t.prime.generateProbablePrime(e,l,r)}function s(t,r){if(t)return i(t);if(e.q=r,e.p.compareTo(e.q)<0){var l=e.p;e.p=e.q,e.q=l}if(0!==e.p.subtract(a.ONE).gcd(e.e).compareTo(a.ONE))return e.p=null,void n();if(0!==e.q.subtract(a.ONE).gcd(e.e).compareTo(a.ONE))return e.q=null,void o(e.qBits,s);if(e.p1=e.p.subtract(a.ONE),e.q1=e.q.subtract(a.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(a.ONE))return e.p=e.q=null,void n();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void o(e.qBits,s);var c=e.e.modInverse(e.phi);e.keys={privateKey:u.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:u.rsa.setPublicKey(e.n,e.e)},i(null,e.keys)}"function"==typeof r&&(i=r,r={}),r=r||{};var l={algorithm:{name:r.algorithm||"PRIMEINC",options:{workers:r.workers||2,workLoad:r.workLoad||100,workerScript:r.workerScript}}};"prng"in r&&(l.prng=r.prng),n()}function n(e){var r=e.toString(16);return r[0]>="8"&&(r="00"+r),t.util.hexToBytes(r)}function o(t){return 100>=t?27:150>=t?18:200>=t?15:250>=t?12:300>=t?9:350>=t?8:400>=t?7:500>=t?6:600>=t?5:800>=t?4:1250>=t?3:2}if("undefined"==typeof a)var a=t.jsbn.BigInteger;var s=t.asn1;t.pki=t.pki||{},t.pki.rsa=t.rsa=t.rsa||{};var u=t.pki,l=[6,4,2,4,2,4,6,2],c={name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},f={name:"RSAPrivateKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},h={name:"RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},p=t.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},d=function(t){var e;if(!(t.algorithm in u.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}e=u.oids[t.algorithm];var i=s.oidToDer(e).getBytes(),n=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),o=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);o.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,i)),o.value.push(s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,""));var a=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,t.digest().getBytes());return n.value.push(o),n.value.push(a),s.toDer(n).getBytes()},y=function(e,r,i){if(i)return e.modPow(r.e,r.n);if(!r.p||!r.q)return e.modPow(r.d,r.n);r.dP||(r.dP=r.d.mod(r.p.subtract(a.ONE))),r.dQ||(r.dQ=r.d.mod(r.q.subtract(a.ONE))),r.qInv||(r.qInv=r.q.modInverse(r.p));var n;do n=new a(t.util.bytesToHex(t.random.getBytes(r.n.bitLength()/8)),16).mod(r.n);while(n.equals(a.ZERO));e=e.multiply(n.modPow(r.e,r.n)).mod(r.n);for(var o=e.mod(r.p).modPow(r.dP,r.p),s=e.mod(r.q).modPow(r.dQ,r.q);o.compareTo(s)<0;)o=o.add(r.p);var u=o.subtract(s).multiply(r.qInv).mod(r.p).multiply(r.q).add(s);return u=u.multiply(n.modInverse(r.n)).mod(r.n)};u.rsa.encrypt=function(r,i,n){var o,s=n,u=Math.ceil(i.n.bitLength()/8);n!==!1&&n!==!0?(s=2===n,o=e(r,i,n)):(o=t.util.createBuffer(),o.putBytes(r));for(var l=new a(o.toHex(),16),c=y(l,i,s),f=c.toString(16),h=t.util.createBuffer(),p=u-Math.ceil(f.length/2);p>0;)h.putByte(0),--p;return h.putBytes(t.util.hexToBytes(f)),h.getBytes()},u.rsa.decrypt=function(e,i,n,o){var s=Math.ceil(i.n.bitLength()/8);if(e.length!==s){var u=new Error("Encrypted message length is invalid.");throw u.length=e.length,u.expected=s,u}var l=new a(t.util.createBuffer(e).toHex(),16);if(l.compareTo(i.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=y(l,i,n),f=c.toString(16),h=t.util.createBuffer(),p=s-Math.ceil(f.length/2);p>0;)h.putByte(0),--p;return h.putBytes(t.util.hexToBytes(f)),o!==!1?r(h.getBytes(),i,n):h.getBytes()},u.rsa.createKeyPairGenerationState=function(e,r,i){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048,i=i||{};var n,o=i.prng||t.random,s={nextBytes:function(t){for(var e=o.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}},u=i.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return n={algorithm:u,state:0,bits:e,rng:s,eInt:r||65537,e:new a(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},n.e.fromInt(n.eInt),n},u.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new a(null);r.fromInt(30);for(var i,n=0,s=function(t,e){return t|e},c=+new Date,f=0;null===t.keys&&(0>=e||e>f);){if(0===t.state){var h=null===t.p?t.pBits:t.qBits,p=h-1;
0===t.pqState?(t.num=new a(h,t.rng),t.num.testBit(p)||t.num.bitwiseTo(a.ONE.shiftLeft(p),s,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):1===t.pqState?t.num.bitLength()>h?t.pqState=0:t.num.isProbablePrime(o(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(l[n++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(a.ONE).gcd(t.e).compareTo(a.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(a.ONE),t.q1=t.q.subtract(a.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(a.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var d=t.e.modInverse(t.phi);t.keys={privateKey:u.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:u.rsa.setPublicKey(t.n,t.e)}}i=+new Date,f+=i-c,c=i}return null!==t.keys},u.rsa.generateKeyPair=function(t,e,r,n){1===arguments.length?"object"==typeof t?(r=t,t=void 0):"function"==typeof t&&(n=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof e?(n=e,e=void 0):"number"!=typeof e&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):3===arguments.length&&("number"==typeof e?"function"==typeof r&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===e&&(e=r.e||65537);var o=u.rsa.createKeyPairGenerationState(t,e,r);return n?void i(o,r,n):(u.rsa.stepKeyPairGenerationState(o,0),o.keys)},u.setRsaPublicKey=u.rsa.setPublicKey=function(i,n){var o={n:i,e:n};return o.encrypt=function(r,i,n){if("string"==typeof i?i=i.toUpperCase():void 0===i&&(i="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===i)i={encode:function(t,r,i){return e(t,r,2).getBytes()}};else if("RSA-OAEP"===i||"RSAES-OAEP"===i)i={encode:function(e,r){return t.pkcs1.encode_rsa_oaep(r,e,n)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(i))i={encode:function(t){return t}};else if("string"==typeof i)throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(r,o,!0);return u.rsa.encrypt(a,o,!0)},o.verify=function(t,e,i){"string"==typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===i?i={verify:function(t,e){e=r(e,o,!0);var i=s.fromDer(e);return t===i.value[1].value}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(t,e){return e=r(e,o,!0),t===e}});var n=u.rsa.decrypt(e,o,!0,!1);return i.verify(t,n,o.n.bitLength())},o},u.setRsaPrivateKey=u.rsa.setPrivateKey=function(e,i,n,o,a,s,l,c){var f={n:e,e:i,d:n,p:o,q:a,dP:s,dQ:l,qInv:c};return f.decrypt=function(e,i,n){"string"==typeof i?i=i.toUpperCase():void 0===i&&(i="RSAES-PKCS1-V1_5");var o=u.rsa.decrypt(e,f,!1,!1);if("RSAES-PKCS1-V1_5"===i)i={decode:r};else if("RSA-OAEP"===i||"RSAES-OAEP"===i)i={decode:function(e,r){return t.pkcs1.decode_rsa_oaep(r,e,n)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(i))throw new Error('Unsupported encryption scheme: "'+i+'".');i={decode:function(t){return t}}}return i.decode(o,f,!1)},f.sign=function(t,e){var r=!1;"string"==typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:d},r=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},r=1);var i=e.encode(t,f.n.bitLength());return u.rsa.encrypt(i,f,r)},f},u.wrapRsaPrivateKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(t).getBytes())])},u.privateKeyFromAsn1=function(e){var r={},i=[];if(s.validate(e,c,r,i)&&(e=s.fromDer(t.util.createBuffer(r.privateKey))),r={},i=[],!s.validate(e,f,r,i)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=i,n}var o,l,h,p,d,y,g,v;return o=t.util.createBuffer(r.privateKeyModulus).toHex(),l=t.util.createBuffer(r.privateKeyPublicExponent).toHex(),h=t.util.createBuffer(r.privateKeyPrivateExponent).toHex(),p=t.util.createBuffer(r.privateKeyPrime1).toHex(),d=t.util.createBuffer(r.privateKeyPrime2).toHex(),y=t.util.createBuffer(r.privateKeyExponent1).toHex(),g=t.util.createBuffer(r.privateKeyExponent2).toHex(),v=t.util.createBuffer(r.privateKeyCoefficient).toHex(),u.setRsaPrivateKey(new a(o,16),new a(l,16),new a(h,16),new a(p,16),new a(d,16),new a(y,16),new a(g,16),new a(v,16))},u.privateKeyToAsn1=u.privateKeyToRSAPrivateKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n(t.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n(t.e)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n(t.d)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n(t.p)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n(t.q)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n(t.dP)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n(t.dQ)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n(t.qInv))])},u.publicKeyFromAsn1=function(e){var r={},i=[];if(s.validate(e,p,r,i)){var n=s.derToOid(r.publicKeyOid);if(n!==u.oids.rsaEncryption){var o=new Error("Cannot read public key. Unknown OID.");throw o.oid=n,o}e=r.rsaPublicKey}if(i=[],!s.validate(e,h,r,i)){var o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw o.errors=i,o}var l=t.util.createBuffer(r.publicKeyModulus).toHex(),c=t.util.createBuffer(r.publicKeyExponent).toHex();return u.setRsaPublicKey(new a(l,16),new a(c,16))},u.publicKeyToAsn1=u.publicKeyToSubjectPublicKeyInfo=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,[u.publicKeyToRSAPublicKey(t)])])},u.publicKeyToRSAPublicKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n(t.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n(t.e))])}}var e="rsa";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var i,n=function(r,n){n.exports=function(n){var o=i.map(function(t){return r(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](n);return n[e]}},o=define;define=function(t,e){return i="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./asn1","./jsbn","./oids","./pkcs1","./prime","./random","./util"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){var t="forge";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return void("undefined"==typeof forge&&(forge={disableNativeCode:!1}));var e=!0;define=function(t,e){e(require,module)}}var r,i=function(e,i){i.exports=function(i){var n=r.map(function(t){return e(t)});if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var o=0;o<n.length;++o)n[o](i);return i},i.exports.disableNativeCode=!1,i.exports(i.exports)},n=define;define=function(t,i){return r="string"==typeof t?i.slice(2):t.slice(2),e?(delete define,n.apply(null,Array.prototype.slice.call(arguments,0))):(define=n,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./aes","./aesCipherSuites","./asn1","./cipher","./cipherModes","./debug","./des","./hmac","./kem","./log","./md","./mgf1","./pbkdf2","./pem","./pkcs7","./pkcs1","./pkcs12","./pki","./prime","./prng","./pss","./random","./rc2","./ssh","./task","./tls","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(t){var e={},r={},i={},n={};e.addDetectionTest=function(t,e){n[t]||(n[t]=e)},e.detect=function(t){return"undefined"==typeof i[i]&&(i[t]=n[t]()),i[t]},e.define=function(t,e,i){if("function"==typeof define&&define.amd)define(t,e,i);else{if(e&&e.length)for(var n=0;n<e.length;n++)e[n]=r[e[n]];r[t]=i.apply(this,e||[])}},t.GCsdk=e,"undefined"!=typeof exports&&(exports.GCsdk=e),e.define("GCsdk.core",[],function(){return e}),"undefined"==typeof define&&(t.define=e.define)}("undefined"==typeof window?this:window),define("GCsdk.promise",["GCsdk.core"],function(t){function e(t){function e(t){var e=this;this.pending=[],this.resolve=function(t){e.complete("resolve",t)},this.reject=function(t){e.complete("reject",t)},t&&(this.isSingleton=!0)}e.prototype={then:function(t,e){return this.pending.push({resolve:t,reject:e}),this},complete:function(t,e){for(;this.pending[0];)this.pending.shift()[t](e)}},t.Promise=e}return"undefined"!=typeof module?module.exports=function(t){return e(t)}:e(GCsdk),GCsdk.Promise}),define("GCsdk.net",["GCsdk.core"],function(t){function e(){if(!("undefined"==typeof XMLHttpRequest||"file:"===window.location.protocol&&window.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function r(t){return t.status>=200&&t.status<300||304==t.status||0==t.status&&t.responseText}function i(i,n){function a(t){if(4==f.readyState){var e=f.mimeType||f.getResponseHeader("content-type")||"";if(h.status=f.status,h.responseText=f.responseText,/json/.test(e)?h.responseJSON=o.parseJSON(f.responseText):/xml/.test(e)&&(h.responseXML=o.parseXML(f.responseText)),h.success=r(f),n.callback)return n.callback(h,f);h.success?(n.success&&n.success(h,f),l&&l.resolve(h,f)):(n.error&&n.error(h,f),l&&l.reject(h,f))}}function s(){var t={Accept:"text/javascript, application/json, text/html, application/xml, text/xml, */*","Content-Type":"application/json"};for(var e in t)n.headers.hasOwnProperty(e)||(n.headers[e]=t[e]);for(var e in n.headers)f.setRequestHeader(e,n.headers[e])}function u(){try{s(),f.send(n.postBody)}catch(t){n.error&&n.error()}}var l,c,f=e(),h={};return t.Promise&&(l=new t.Promise),"undefined"==typeof n&&(n={}),n.method=n.method?n.method.toLowerCase():"get",n.asynchronous=n.asynchronous||!0,n.postBody=n.postBody||"",f.onreadystatechange=a,f.open(n.method,i,n.asynchronous),n.headers=n.headers||{},n.contentType&&(n.headers["Content-Type"]=n.contentType),"string"!=typeof n.postBody&&(n.postBody=o.serialize(n.postBody)),c={set:function(t,e){return n.headers[t]=e,c},send:function(t,e){return n.postBody=o.serialize(t),n.callback=e,u(),c},end:function(t){return n.callback=t,u(),c},data:function(t){return n.postBody=o.serialize(t),c},then:function(){return c.end(),l&&l.then.apply(l,arguments),c}}}function n(t,e,r){function i(t){n.success(t),n.teardown()}var n=this;this.url=t,this.methodName="__GCsdk_jsonp_"+parseInt((new Date).getTime()),this.success=e,this.failure=r,window[this.methodName]=i}var o={},a="".trim?function(t){return t.trim()}:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};return o.serialize=function(t){if(t){if("string"==typeof t)return t;var e=[];for(var r in t)e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}},t.addDetectionTest("JSON.parse",function(){return window.JSON&&window.JSON.parse}),o.parseJSON=function(e){return"string"==typeof e&&e?(e=a(e),t.detect("JSON.parse")?window.JSON.parse(e):new Function("return "+e)()):null},window.DOMParser?o.parseXML=function(t){return(new DOMParser).parseFromString(t,"text/xml")}:o.parseXML=function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},n.prototype.run=function(){this.scriptTag=document.createElement("script"),this.scriptTag.id=this.methodName,this.scriptTag.src=this.url.replace("{callback}",this.methodName);var t=this;this.scriptTag.onerror=function(){t.failure()},document.body.appendChild(this.scriptTag)},n.prototype.teardown=function(){window[this.methodName]=null;try{delete window[this.methodName]}catch(t){}this.scriptTag&&document.body.removeChild(this.scriptTag)},o.get=function(t,e){return"undefined"==typeof e&&(e={}),e.method="get",i(t,e)},o.post=function(t,e){return"undefined"==typeof e&&(e={}),e.method="post",i(t,e)},o.jsonp=function(t,e){"undefined"==typeof e&&(e={});var r=new n(t,e.success,e.failure);r.run()},t.get=o.get,t.post=o.post,t.jsonp=o.jsonp,o.ajax=i,t.net=o,o}),define("GCsdk.Util",["GCsdk.core"],function(t){var e=function(){this.getMetadata=function(){return{screenSize:window.innerWidth+"x"+window.innerHeight,platformIdentifier:window.navigator.userAgent,sdkIdentifier:"JavaScriptClientSDK/v1.0"}},this.base64Encode=function(t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){throw"data must be either a String or a JSON object"}var r,i,n,o,a,s,u,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,h=0,p="",d=[];if(!t)return t;do r=t.charCodeAt(f++),i=t.charCodeAt(f++),n=t.charCodeAt(f++),l=r<<16|i<<8|n,o=l>>18&63,a=l>>12&63,s=l>>6&63,u=63&l,d[h++]=c.charAt(o)+c.charAt(a)+c.charAt(s)+c.charAt(u);while(f<t.length);p=d.join("");var y=t.length%3;return(y?p.slice(0,y-3):p)+"===".slice(y||3)}};return t.Util=e,e}),define("GCsdk.PublicKeyResponse",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.keyId=t.keyId,this.publicKey=t.publicKey};return t.PublicKeyResponse=e,e}),define("GCsdk.C2SCommunicatorConfiguration",["GCsdk.core"],function(t){var e=function(t){this.endpoints={PROD:{EU:{API:"https://api-eu.globalcollect.com/client/v1",ASSETS:"https://assets.pay1.poweredbyglobalcollect.com"},US:{API:"https://api-us.globalcollect.com/client/v1",ASSETS:"https://assets.pay2.poweredbyglobalcollect.com"}},PREPROD:{EU:{API:"https://api-eu-preprod.globalcollect.com/client/v1",ASSETS:"https://assets.pay1.preprod.poweredbyglobalcollect.com"},US:{API:"https://api-us-preprod.globalcollect.com/client/v1",ASSETS:"https://assets.pay2.preprod.poweredbyglobalcollect.com"}},SANDBOX:{EU:{API:"https://api-eu-sandbox.globalcollect.com/client/v1",ASSETS:"https://assets.pay1.sandbox.poweredbyglobalcollect.com"},US:{API:"https://api-us-sandbox.globalcollect.com/client/v1",ASSETS:"https://assets.pay2.sandbox.poweredbyglobalcollect.com"}},INTEGRATION:{EU:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"},US:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"}},DEV_NAMI:{EU:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"},US:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"}},DEV_ISC:{EU:{API:"http://gc-ci-dev.isaac.local:7003/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"},US:{API:"http://gc-ci-dev.isaac.local:7003/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"}}},this.region=t.region,this.environment=t.environment||"RPP",this.clientSessionId=t.clientSessionID,this.customerId=t.customerId,this.apiBaseUrl=t.apiBaseUrl||""===t.apiBaseUrl?t.apiBaseUrl:this.endpoints[this.environment][this.region].API,this.assetsBaseUrl=t.assetsBaseUrl||""===t.assetsBaseUrl?t.assetsBaseUrl:this.endpoints[this.environment][this.region].ASSETS};return t.C2SCommunicatorConfiguration=e,e}),define("GCsdk.IinDetailsResponse",["GCsdk.core","GCsdk.promise"],function(t,e){var r=function(){this.status="",this.countryCode="",this.paymentProductId=""};return t.IinDetailsResponse=r,r}),define("GCsdk.C2SCommunicator",["GCsdk.core","GCsdk.promise","GCsdk.net","GCsdk.Util","GCsdk.PublicKeyResponse","GCsdk.IinDetailsResponse"],function(t,e,r,i,n,o){var a=function(t,a){var s=t,u=new i,l={},c=a,f={expirydate:"tel",string:"text",numericstring:"tel",integer:"number",expirationDate:"tel"},h=function(t,e){for(var r=0,i=t.fields.length;i>r;r++){var n=t.fields[r];n.type=n.displayHints.obfuscate?"password":f[n.type];for(validatorKey in n.dataRestrictions.validators)n.validators=n.validators||[],n.validators.push(validatorKey);"list"===n.displayHints.formElement.type&&(n.displayHints.formElement.list=!0),n.displayHints.tooltip&&n.displayHints.tooltip.image&&(n.displayHints.tooltip.image=e+"/"+n.displayHints.tooltip.image)}return t.fields.sort(function(t,e){return t.displayHints.displayOrder<e.displayHints.displayOrder?-1:1}),t.displayHints.logo=e+"/"+t.displayHints.logo,t},p=function(t,e){for(var r=0,i=t.paymentProducts.length;i>r;r++){var n=t.paymentProducts[r];n.displayHints.logo=e+"/"+n.displayHints.logo}return t.paymentProducts.sort(function(t,e){return t.displayHints.displayOrder<e.displayHints.displayOrder?-1:1}),t},d=u.getMetadata();this.getPaymentProducts=function(t){var i=new e,n=(new Date).getTime(),o="getPaymentProducts-"+t.totalAmount+"_"+t.countryCode+"_"+t.locale+"_"+t.isRecurring+"_"+t.currency;return l[o]?setTimeout(function(){i.resolve(l[o])},0):r.get(s.apiBaseUrl+"/"+s.customerId+"/products?countryCode="+t.countryCode+"&isRecurring="+t.isRecurring+"&amount="+t.totalAmount+"&currencyCode="+t.currency+"&hide=fields&locale="+t.locale+"&cacheBust="+n).set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(t){if(t.success){var e=p(t.responseJSON,s.assetsBaseUrl);l[o]=e,i.resolve(e)}else i.reject()}),i},this.getPaymentProduct=function(i,n){var o=new e,a=(new Date).getTime(),f="getPaymentProduct-"+i+"_"+n.totalAmount+"_"+n.countryCode+"__"+n.locale+"_"+n.isRecurring+"_"+n.currency;if(c&&c.id===i)if(l[f])setTimeout(function(){o.resolve(l[f])},0);else{var p=h(c,s.assetsBaseUrl);l[f]=p,setTimeout(function(){o.resolve(l[f])},0)}else l[f]?setTimeout(function(){o.resolve(l[f])},0):r.get(s.apiBaseUrl+"/"+s.customerId+"/products/"+i+"?countryCode="+n.countryCode+"&isRecurring="+n.isRecurring+"&amount="+n.totalAmount+"&currencyCode="+n.currency+"&locale="+n.locale+"&cacheBust="+a).set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(e){if(e.success){var r=h(e.responseJSON,t.assetsBaseUrl);l[f]=r,o.resolve(r)}else o.reject()});return o},this.getPaymentProductIdByCreditCardNumber=function(t,i){var n=new e,a=new o,c="getPaymentProductIdByCreditCardNumber-"+t,f=this;if(this.context=i,l[c])setTimeout(function(){n.resolve(l[c])},0);else{var h=function(t){return!(t.length<6)};h(t)?r.post(s.apiBaseUrl+"/"+s.customerId+"/services/getIINdetails").data('{"bin": "'+t+'"}').set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(t){t.success?(a.json=t.responseJSON,a.countryCode=t.responseJSON.countryCode,a.paymentProductId=t.responseJSON.paymentProductId,f.getPaymentProduct(a.paymentProductId,f.context).then(function(t){t?a.status="SUPPORTED":a.status="UNSUPPORTED",l[c]=a,n.resolve(a)},function(){a.status="UNKNOWN",n.reject(a)})):(a.status="UNKNOWN",n.reject(a))}):(a.status="NOT_ENOUGH_DIGITS",setTimeout(function(){n.resolve(a)},0))}return n},this.getPublicKey=function(){var t=new e,i="publicKey";return l[i]?setTimeout(function(){t.resolve(l[i])},0):r.get(s.apiBaseUrl+"/"+s.customerId+"/crypto/publickey").set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(e){if(e.success){var r=new n(e.responseJSON);l[i]=r,t.resolve(r)}else t.reject("unable to get public key")}),t},this.getPaymentProductDirectory=function(t,i,n){var o=new e,a="getPaymentProductDirectory-"+t+"_"+i+"_"+n;return l[a]?setTimeout(function(){o.resolve(l[a])},0):r.get(s.apiBaseUrl+"/"+s.customerId+"/products/"+t+"/directory?countryCode="+n+"&currencyCode="+i).set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(t){t.success?(l[a]=t.responseJSON,o.resolve(t.responseJSON)):o.reject("unable to retrieve payment product directory")}),o},this.convertAmount=function(t,i,n){var o=new e,a="convertAmount-"+t+"_"+i+"_"+n;return l[a]?setTimeout(function(){o.resolve(l[a])},0):r.get(s.apiBaseUrl+"/"+s.customerId+"/services/convert/amount?source="+i+"&target="+n+"&amount="+t).set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(t){t.success?(l[a]=t.responseJSON,o.resolve(t.responseJSON)):o.reject("unable to convert amount")}),o}};return t.C2SCommunicator=a,a}),define("GCsdk.LabelTemplateElement",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.attributeKey=t.attributeKey,this.mask=t.mask,this.wildcardMask=t.mask?t.mask.replace(/9/g,"*"):""};return t.LabelTemplateElement=e,e}),define("GCsdk.Attribute",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.key=t.key,this.value=t.value,this.status=t.status,this.mustWriteReason=t.mustWriteReason};return t.Attribute=e,e}),define("GCsdk.AccountOnFileDisplayHints",["GCsdk.core","GCsdk.LabelTemplateElement"],function(t,e){var r=function(t,r,i){if(t.labelTemplate)for(var n=0,o=t.labelTemplate.length;o>n;n++){var a=new e(t.labelTemplate[n]);r.push(a),i[a.attributeKey]=a}},i=function(t){this.json=t,this.labelTemplate=[],this.labelTemplateElementByAttributeKey={},r(t,this.labelTemplate,this.labelTemplateElementByAttributeKey)};return t.AccountOnFileDisplayHints=i,i}),define("GCsdk.AccountOnFile",["GCsdk.core","GCsdk.AccountOnFileDisplayHints","GCsdk.Attribute"],function(t,e,r){var i=function(t,e,i){if(t.attributes)for(var n=0,o=t.attributes.length;o>n;n++){var a=new r(t.attributes[n]);e.push(a),i[a.key]=a}},n=function(r){this.json=r,this.attributes=[],this.attributeByKey={},this.displayHints=new e(r.displayHints),this.id=r.id,this.paymentProductId=r.paymentProductId,this.getMaskedValueByAttributeKey=function(e){var r,i=this.attributeByKey[e].value;try{r=this.displayHints.labelTemplateElementByAttributeKey[e].wildcardMask}catch(n){}if(void 0!==i&&void 0!==r){var o=new t.MaskingUtil;return o.applyMask(r,i)}},i(r,this.attributes,this.attributeByKey)};return t.AccountOnFile=n,n}),define("GCsdk.PaymentProductDisplayHints",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.displayOrder=t.displayOrder,this.label=t.label,this.logo=t.logo};return t.PaymentProductDisplayHints=e,e}),define("GCsdk.BasicPaymentProduct",["GCsdk.core","GCsdk.AccountOnFile","GCsdk.PaymentProductDisplayHints"],function(t,e,r){var i=function(t,r,i){if(t.accountsOnFile)for(var n=0,o=t.accountsOnFile.length;o>n;n++){var a=new e(t.accountsOnFile[n]);r.push(a),i[a.id]=a}},n=function(t){this.json=t,this.accountsOnFile=[],this.accountOnFileById={},this.allowsRecurring=t.allowsRecurring,this.allowsTokenization=t.allowsTokenization,this.autoTokenized=t.autoTokenized,this.displayHints=new r(t.displayHints),this.id=t.id,this.maxAmount=t.maxAmount,this.minAmount=t.minAmount,this.mobileIntegrationLevel=t.mobileIntegrationLevel,this.usesRedirectionTo3rdParty=t.usesRedirectionTo3rdParty,i(t,this.accountsOnFile,this.accountOnFileById)};return t.BasicPaymentProduct=n,n}),define("GCsdk.MaskedString",["GCsdk.core"],function(t){var e=function(t,e){this.formattedValue=t,this.cursorIndex=e};return t.MaskedString=e,e}),define("GCsdk.MaskingUtil",["GCsdk.core","GCsdk.MaskedString"],function(t,e){var r=function(t,e,i,n,o){t+e<o.length&&t<n.length&&("9"===n[t]&&Number(o[t+e])>-1&&" "!==o[t+e]||"*"===n[t]?i.push(o[t+e]):o[t+e]===n[t]?i.push(o[t+e]):"9"!==n[t]&&"*"!==n[t]?(i.push(n[t]),e--):(o.splice(t+e,1),t--),r(t+1,e,i,n,o))},i=function(){this.applyMask=function(t,i,n){var o=[],a=i.split("");if(t){for(var s=t.split(""),u=[],l=0,c=s.length;c>l;l++){var f=s[l];"{"===f||"}"===f||u.push(f)}r(0,0,o,u,a)}else for(var l=0,c=a.length;c>l;l++){var f=a[l];o.push(f)}i=o.join("");var h=1;if(n)for(var p=n.split(""),l=0,c=o.length;c>l;l++)if(o[l]!==p[l]){h=l+1;break}return i.substring(0,i.length-1)===n&&(h=i.length+1),new e(i,h)},this.getMaxLengthBasedOnMask=function(t){if(t){for(var e=t.split(""),r=-1,i=0,n=e.length;n>i;i++){r++;var o=e[i];"{"!==o&&"}"!==o||r--}return r}},this.removeMask=function(t,e){var r=[],i=e?e.split(""):[];if(t)for(var n=t.split(""),o=-1,a=!1,s=0,u=n.length;u>s;s++){o++;var l=n[s];"{"===l||"}"===l?(o--,"{"===l?a=!0:"}"===l&&(a=!1)):a&&i[o]&&r.push(i[o])}else for(var s=0,u=i.length;u>s;s++){var l=i[s];r.push(l)}return r.join("").trim()}};return t.MaskingUtil=i,i}),define("GCsdk.ValidationRuleLuhn",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){var e=[[0,2,4,6,8,1,3,5,7,9],[0,1,2,3,4,5,6,7,8,9]],r=0;return t.replace(/\D+/g,"").replace(/[\d]/g,function(t,i,n){r+=e[n.length-i&1][parseInt(t,10)]}),r%10===0&&r>0}};return t.ValidationRuleLuhn=e,e}),define("GCsdk.ValidationRuleExpirationDate",["GCsdk.core"],function(t){var e=function(t){var e=/\d{4}|\d{6}$/g;return e.test(t)},r=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){if(t=t.replace(/[^\d]/g,""),4===t.length)split=[t.substring(0,2),"20"+t.substring(2,4)];else{if(6!==t.length)return!1;split=[t.substring(0,2),t.substring(2,6)]}return e(t)?(expirationDate=new Date(split[1],split[0]-1),expirationDate.getMonth()!==Number(split[0]-1)||expirationDate.getFullYear()!==Number(split[1])?!1:expirationDate>(new Date).setMonth((new Date).getMonth()-1)):!1}};return t.ValidationRuleExpirationDate=r,r}),define("GCsdk.ValidationRuleFixedList",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.allowedValues=t.attributes.allowedValues,this.validate=function(t){for(var e=0,r=this.allowedValues.length;r>e;e++)if(this.allowedValues[e]===t)return!0;return!1}};return t.ValidationRuleFixedList=e,e}),define("GCsdk.ValidationRuleLength",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.maxLength=t.attributes.maxLength,this.minLength=t.attributes.minLength,this.validate=function(t){return this.minLength<=t.length&&t.length<=this.maxLength}};return t.ValidationRuleLength=e,e}),define("GCsdk.ValidationRuleRange",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.maxValue=t.attributes.maxValue,this.minValue=t.attributes.minValue,this.validate=function(t){return isNaN(t)?!1:(t=Number(t),this.minValue<=t&&t<=this.maxValue)}};return t.ValidationRuleRange=e,e}),define("GCsdk.ValidationRuleRegularExpression",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.regularExpression=t.attributes.regularExpression,this.validate=function(t){var e=new RegExp(this.regularExpression);return e.test(t)}};return t.ValidationRuleRegularExpression=e,e}),define("GCsdk.ValidationRuleEmailAddress",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){var e=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return e.test(t)}};return t.ValidationRuleEmailAddress=e,e}),define("GCsdk.ValidationRuleFactory",["GCsdk.core","GCsdk.ValidationRuleEmailAddress","GCsdk.ValidationRuleExpirationDate","GCsdk.ValidationRuleFixedList","GCsdk.ValidationRuleLength","GCsdk.ValidationRuleLuhn","GCsdk.ValidationRuleRange","GCsdk.ValidationRuleRegularExpression"],function(GCsdk,ValidationRuleEmailAddress,ValidationRuleExpirationDate,ValidationRuleFixedList,ValidationRuleLength,ValidationRuleLuhn,ValidationRuleRange,ValidationRuleRegularExpression){var ValidationRuleFactory=function(){this.makeValidator=function(json){var classType=json.type.charAt(0).toUpperCase()+json.type.slice(1),className=eval("ValidationRule"+classType);return new className(json)}};return GCsdk.ValidationRuleFactory=ValidationRuleFactory,ValidationRuleFactory}),define("GCsdk.DataRestrictions",["GCsdk.core","GCsdk.ValidationRuleExpirationDate","GCsdk.ValidationRuleFixedList","GCsdk.ValidationRuleLength","GCsdk.ValidationRuleLuhn","GCsdk.ValidationRuleRange","GCsdk.ValidationRuleRegularExpression","GCsdk.ValidationRuleEmailAddress","GCsdk.ValidationRuleFactory"],function(t,e,r,i,n,o,a,s,u){var l=function(t,e){var r=function(t,e,r){var i=new u;if(t.validators)for(var n in t.validators){var o=i.makeValidator({type:n,attributes:t.validators[n]});e.push(o),r[o.type]=o}};this.json=t,this.isRequired=t.isRequired,this.validationRules=[],this.validationRuleByType={},r(t,this.validationRules,this.validationRuleByType)};return t.DataRestrictions=l,l}),define("GCsdk.ValueMappingElement",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.displayName=t.displayName,this.value=t.value};return t.ValueMappingElement=e,e}),define("GCsdk.FormElement",["GCsdk.core","GCsdk.ValueMappingElement"],function(t,e){var r=function(t){var r=function(t,r){if(t.valueMapping)for(var i=0,n=t.valueMapping.length;n>i;i++)r.push(new e(t.valueMapping[i]))};this.json=t,this.type=t.type,this.valueMapping=[],r(t,this.valueMapping)};return t.FormElement=r,r}),define("GCsdk.Tooltip",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.image=t.image,this.label=t.label};return t.Tooltip=e,e}),define("GCsdk.PaymentProductFieldDisplayHints",["GCsdk.core","GCsdk.Tooltip","GCsdk.FormElement"],function(t,e,r){var i=function(t){this.json=t,this.displayOrder=t.displayOrder,this.formElement=new r(t.formElement),this.label=t.label,this.mask=t.mask,this.obfuscate=t.obfuscate,this.placeholderLabel=t.placeholderLabel,this.preferredInputType=t.preferredInputType,this.tooltip=t.tooltip?new e(t.tooltip):void 0,this.alwaysShow=t.alwaysShow,this.wildcardMask=t.mask?t.mask.replace(/9/g,"*"):""};return t.PaymentProductFieldDisplayHints=i,i}),define("GCsdk.PaymentProductField",["GCsdk.core","GCsdk.PaymentProductFieldDisplayHints","GCsdk.DataRestrictions","GCsdk.MaskingUtil"],function(t,e,r,i){var n=function(t){this.json=t,this.displayHints=new e(t.displayHints),this.dataRestrictions=new r(t.dataRestrictions,this.displayHints.mask),this.id=t.id,this.type=t.type;var n=[];this.getErrorCodes=function(t){return t&&(n=[],this.isValid(t)),n},this.isValid=function(t){var e=this.dataRestrictions.validationRules,r=!1;t=this.removeMask(t);for(var i=0,o=e.length;o>i;i++){var a=e[i];a.validate(t)||(r=!0,n.push(a.errorMessageId))}return!r},this.applyMask=function(t,e){var r=new i;return r.applyMask(this.displayHints.mask,t,e)},this.applyWildcardMask=function(t,e){var r=new i;return r.applyMask(this.displayHints.wildcardMask,t,e)},this.removeMask=function(t){var e=new i;return e.removeMask(this.displayHints.mask,t)}};return t.PaymentProductField=n,n}),define("GCsdk.PaymentProduct",["GCsdk.core","GCsdk.BasicPaymentProduct","GCsdk.PaymentProductField"],function(t,e,r){var i=function(t,e,i){if(t.fields)for(var n=0,o=t.fields.length;o>n;n++){var a=new r(t.fields[n]);e.push(a),i[a.id]=a}},n=function(t){var r=new e(t);return r.json=t,
r.paymentProductFields=[],r.paymentProductFieldById={},i(r.json,r.paymentProductFields,r.paymentProductFieldById),r};return t.PaymentProduct=n,n}),define("GCsdk.PaymentProducts",["GCsdk.core","GCsdk.PaymentProduct"],function(t,e){var r=function(t,r,i,n,o,a){if(t.paymentProducts)for(var s=0,u=t.paymentProducts.length;u>s;s++){var l=new e(t.paymentProducts[s]);if(r.push(l),n[l.id]=l,l.accountsOnFile)for(var c=l.accountsOnFile,f=0,h=c.length;h>f;f++){var p=c[f];i.push(p),o[p.id]=p,a[p.id]=l}}},i=function(t){this.paymentProducts=[],this.paymentProductById={},this.paymentProductByAccountOnFileId={},this.accountsOnFile=[],this.accountOnFileById={},this.json=t,r(t,this.paymentProducts,this.accountsOnFile,this.paymentProductById,this.accountOnFileById,this.paymentProductByAccountOnFileId)};return t.PaymentProducts=i,i}),define("GCsdk.PaymentRequest",["GCsdk.core"],function(t){var e=function(t){var e={},r=null,i=null,n=!1;this.isValid=function(){var t=this.getErrorMessageIds();return 0===t.length},this.setValue=function(t,r){e[t]=r},this.setTokenize=function(t){n=t},this.getTokenize=function(){return n},this.getErrorMessageIds=function(){var t=[];for(key in e){var i=r.paymentProductFieldById[key];i&&(t=t.concat(i.getErrorCodes(e[key])))}return t},this.getValue=function(t){return e[t]},this.getValues=function(){return e},this.getMaskedValue=function(t){var e=r.paymentProductFieldById[t],i=e.applyMask(this.getValue(t));return i.formattedValue()},this.getMaskedValues=function(){var t=e,i=[];for(var n in t){var o=r.paymentProductFieldById[n],a=o.applyMask(this.getValue(n));i[n]=a.formattedValue}return i},this.getUnmaskedValues=function(){var t=e,i=[];for(var n in t){var o=r.paymentProductFieldById[n];if(o){var a=o.applyMask(this.getValue(n)),s=a.formattedValue;i[n]=o.removeMask(s)}}return i},this.setPaymentProduct=function(t){r=t},this.getPaymentProduct=function(){return r},this.setAccountOnFile=function(t){for(var r=0,n=t.attributes.length;n>r;r++){var o=t.attributes[r];delete e[o.key]}i=t},this.getAccountOnFile=function(){return i},this.getClientSessionID=function(){return t}};return t.PaymentRequest=e,e}),define("GCsdk.C2SPaymentProductContext",["GCsdk.core"],function(t){var e=function(t){this.totalAmount=t.totalAmount,this.countryCode=t.countryCode,this.isRecurring=t.isRecurring,this.currency=t.currency,this.locale=t.locale};return t.C2SPaymentProductContext=e,e}),define("GCsdk.JOSEEncryptor",["GCsdk.core"],function(t){var e=forge.pki,r=(forge.asn1,512),i=128,n=function(t){return t=forge.util.encode64(t),t=t.split("=")[0],t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_")},o=function(t){var e={alg:"RSA-OAEP",enc:"A256CBC-HS512",kid:t};return JSON.stringify(e)},a=function(t){var r=forge.util.decode64(t),i=forge.util.createBuffer(r,"raw"),n=forge.asn1.fromDer(i),o=e.publicKeyFromAsn1(n);return o},s=function(t,e){var r=e.encrypt(t,"RSA-OAEP");return r},u=function(t,e,r){var i=forge.cipher.createCipher("AES-CBC",e);return i.start({iv:r}),i.update(forge.util.createBuffer(t)),i.finish(),i.output.bytes()},l=function(t){var e=forge.util.createBuffer(t),r=8*e.length(),i=forge.util.createBuffer();return i.putInt32(0),i.putInt32(r),i.bytes()},c=function(t,e,r,i,n){var o=forge.util.createBuffer();o.putBytes(e),o.putBytes(r),o.putBytes(i),o.putBytes(n);var a=o.bytes(),s=forge.hmac.create();return s.start(forge.sha512.create(),t),s.update(a),s.digest().bytes()},f=function(){this.encrypt=function(t,e){var f=JSON.stringify(t),h=o(e.keyId),p=n(h),d=forge.random.getBytesSync(r/8),y=a(e.publicKey),g=s(d,y),v=n(g),m=d.substring(0,r/2/8),b=d.substring(r/2/8),B=forge.random.getBytesSync(i/8),S=n(B),C=u(f,b,B),A=n(C),I=l(p),w=c(m,p,B,C,I),E=w.substring(0,w.length/2),T=n(E);return p+"."+v+"."+S+"."+A+"."+T}};return t.JOSEEncryptor=f,f}),define("GCsdk.Encryptor",["GCsdk.core","GCsdk.promise","GCsdk.JOSEEncryptor"],function(t,e,r){var i=function(t){this.encrypt=function(i){var n=new e,o="";return t.then(function(t){if(i.isValid()){var e={clientSessionId:i.getClientSessionID(),nonce:forge.util.bytesToHex(forge.random.getBytesSync(16)),paymentProductId:i.getPaymentProduct().id,tokenize:i.getTokenize()};i.getAccountOnFile()&&(e.accountOnFileId=i.getAccountOnFile().id);var a=[],s=i.getUnmaskedValues();for(var u in s)a.push({key:u,value:s[u]});e.paymentValues=a;var l=new r;o=l.encrypt(e,t),n.resolve(o)}else n.reject(i.getErrorMessageIds())},function(t){n.reject(t)}),n}};return t.Encryptor=i,i}),define("GCsdk.Session",["GCsdk.core","GCsdk.C2SCommunicator","GCsdk.C2SCommunicatorConfiguration","GCsdk.IinDetailsResponse","GCsdk.promise","GCsdk.C2SPaymentProductContext","GCsdk.ValidationRule","GCsdk.PaymentProducts","GCsdk.PaymentProduct","GCsdk.PaymentRequest","GCsdk.Encryptor"],function(t,e,r,i,n,o,a,s,u,l,c){var f=function(t,i){var a,f,h,p,d=new r(t),y=new e(d,i);this.apiBaseUrl=d.apiBaseUrl,this.assetsBaseUrl=d.assetsBaseUrl,this.getPaymentProducts=function(t){var e=new n,r=new o(t);return y.getPaymentProducts(r).then(function(r){h=t;var i=new s(r);e.resolve(i)},function(){e.reject()}),e},this.getPaymentProduct=function(t,e){var r=new n;a=t;var i=new o(h||e);return y.getPaymentProduct(t,i).then(function(t){f=new u(t),r.resolve(f)},function(){f=null,r.reject()}),r},this.getIinDetails=function(t,e){t=t.replace(/ /g,"").substring(0,6);var r=new o(h||e);return y.getPaymentProductIdByCreditCardNumber(t,r)},this.getPublicKey=function(){return y.getPublicKey()},this.getPaymentProductDirectory=function(t,e,r){return y.getPaymentProductDirectory(t,e,r)},this.convertAmount=function(t,e,r){return y.convertAmount(t,e,r)},this.getPaymentRequest=function(){return p||(p=new l(t.clientSessionID)),p},this.getEncryptor=function(){var t=y.getPublicKey();return new c(t)}};return t.Session=f,f});
//# sourceMappingURL=gcsdk.min.js.map
